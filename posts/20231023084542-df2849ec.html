<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java | CJ's Blog</title><meta name="author" content="CJ"><meta name="copyright" content="CJ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Java 基础Jdk 下载安装及环境配置 jdk国内源- WEJDK学习站 Stream 流视频学习笔记v_不会 Lambda 表达式、函数式编程？你确定能看懂公司代码？-java8 函数式编程(Lambda 表达式，Optional，Stream 流)从入门到精通-最通俗易懂 d_Java8 函数式编程-Stream 流 JAVA8 新特性[第四季]-强大的 Stream API Lambda">
<meta property="og:type" content="article">
<meta property="og:title" content="Java">
<meta property="og:url" content="https://cjchn.github.io/posts/20231023084542-df2849ec.html">
<meta property="og:site_name" content="CJ&#39;s Blog">
<meta property="og:description" content="Java 基础Jdk 下载安装及环境配置 jdk国内源- WEJDK学习站 Stream 流视频学习笔记v_不会 Lambda 表达式、函数式编程？你确定能看懂公司代码？-java8 函数式编程(Lambda 表达式，Optional，Stream 流)从入门到精通-最通俗易懂 d_Java8 函数式编程-Stream 流 JAVA8 新特性[第四季]-强大的 Stream API Lambda">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vip.helloimg.com/images/2023/12/15/o7LabX.jpg">
<meta property="article:published_time" content="2023-10-23T08:45:42.000Z">
<meta property="article:modified_time" content="2024-01-04T08:19:42.761Z">
<meta property="article:author" content="CJ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vip.helloimg.com/images/2023/12/15/o7LabX.jpg"><link rel="shortcut icon" href="https://imgcdn.319226.xyz/202401041503387.png"><link rel="canonical" href="https://cjchn.github.io/posts/20231023084542-df2849ec.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"51DB2F26GB","apiKey":"1de06e184485e0844182c52de8afda82","indexName":"cjchn.github.io","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-04 16:19:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://imgcdn.319226.xyz/202401041503387.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://dh.echs.top/cjcn.html"><i class="fa-fw fa-solid fa-location-arrow"></i><span> 导航</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://status.319226.xyz/"><i class="fa-fw fa-brands fa-watchman-monitoring"></i><span> 监测</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://vip.helloimg.com/images/2023/12/15/o7LabX.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="CJ's Blog"><span class="site-name">CJ's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://dh.echs.top/cjcn.html"><i class="fa-fw fa-solid fa-location-arrow"></i><span> 导航</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://status.319226.xyz/"><i class="fa-fw fa-brands fa-watchman-monitoring"></i><span> 监测</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-23T08:45:42.000Z" title="发表于 2023-10-23 16:45:42">2023-10-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-04T08:19:42.761Z" title="更新于 2024-01-04 16:19:42">2024-01-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">19.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>86分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Java-基础"><a href="#Java-基础" class="headerlink" title="Java 基础"></a>Java 基础</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ACE_U_005A/article/details/114840497">Jdk 下载安装及环境配置</a></p>
<p><a target="_blank" rel="noopener" href="https://www.injdk.cn/">jdk国内源- WEJDK学习站</a></p>
<h2 id="Stream-流"><a href="#Stream-流" class="headerlink" title="Stream 流"></a>Stream 流</h2><h3 id="视频学习笔记"><a href="#视频学习笔记" class="headerlink" title="视频学习笔记"></a>视频学习笔记</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av208804748/">v_不会 Lambda 表达式、函数式编程？你确定能看懂公司代码？-java8 函数式编程(Lambda 表达式，Optional，Stream 流)从入门到精通-最通俗易懂</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Exusiai_/article/details/124693969">d_Java8 函数式编程-Stream 流</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/liudongdong0909/article/details/77429875">JAVA8 新特性[第四季]-强大的 Stream API</a></p>
<h4 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h4><p>Lambda 表达式重要前提，必须有接口，且该接口只有一个抽象方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 开启新线程并执行</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;多线程任务执行！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Comparator 接口的实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonComparatorLambda</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 准备数组数据</span></span><br><span class="line">        Person[] persons = &#123;<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">19</span>), <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;rose&quot;</span>, <span class="number">18</span>), <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tom&quot;</span>, <span class="number">23</span>)&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 匿名内部类设定比较规则</span></span><br><span class="line">        <span class="comment">/*Comparator&lt;Person&gt; comparator = new Comparator&lt;Person&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public int compare(Person o1, Person o2) &#123;</span></span><br><span class="line"><span class="comment">                return o1.getAge()-o2.getAge();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数组工具类方法排序 (lambda简化书写)</span></span><br><span class="line">        Arrays.sort(persons,(Person p1,Person p2)-&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> p1.getAge()-p2.getAge();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历打印</span></span><br><span class="line">        <span class="keyword">for</span> (Person person : persons) &#123;</span><br><span class="line">            System.out.println(person);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>IDEA 可以使用 Alt+Enter 进行 lambda 表达式的简化和转回。</p>
</blockquote>
<p>参考</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> &lt;R&gt; R <span class="title function_">typeConver</span><span class="params">(Function&lt;String,R&gt; function)</span>&#123;</span><br><span class="line">     <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;1235&quot;</span>;</span><br><span class="line">     <span class="type">R</span> <span class="variable">result</span> <span class="operator">=</span> function.apply(str);</span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> typeConver(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;String, Integer&gt;() &#123;</span><br><span class="line">         <span class="meta">@Override</span></span><br><span class="line">         <span class="keyword">public</span> Integer <span class="title function_">apply</span><span class="params">(String s)</span> &#123;</span><br><span class="line">             <span class="keyword">return</span> Integer.valueOf(s);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     System.out.println(result);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lambda 写法</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> typeConver((String s)-&gt;&#123;</span><br><span class="line">     <span class="keyword">return</span> Integer.valueOf(s);</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>IDEA 断点 有个 StreamTrace 功能，可以看到 Stream 流的处理过程。</p>
</blockquote>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">authors.stream()</span><br><span class="line">        .filter(author -&gt; author.getName().length()&gt;<span class="number">1</span>)</span><br><span class="line">        .forEach(author -&gt; System.out.println(author.getName()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">authors.stream()</span><br><span class="line">               .map(author -&gt; author.getAge())</span><br><span class="line">               .map(age-&gt;age+<span class="number">10</span>)</span><br><span class="line">               .forEach(age-&gt; System.out.println(age));</span><br></pre></td></tr></table></figure>

<h4 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h4><p>重写 equals 方法，hashcode 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">authors.stream()</span><br><span class="line">        .distinct()</span><br><span class="line">        .forEach(author -&gt; System.out.println(author.getName()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h4><p>实现 Comparable 接口或者匿名内部类 Comparator 实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">        List&lt;Author&gt; authors = getAuthors();</span><br><span class="line"><span class="comment">//        对流中的元素按照年龄进行降序排序，并且要求不能有重复的元素。</span></span><br><span class="line">        authors.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .sorted((o1, o2) -&gt; o2.getAge()-o1.getAge())</span><br><span class="line">                .forEach(author -&gt; System.out.println(author.getAge()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Comparable this 是当前项，this.xx - o.xx 为升序；Comparator 中 o1 是当前项，o1-o2 为升序；</p>
</blockquote>
<h4 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h4><h4 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h4><h4 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        打印现有数据的所有分类。要求对分类进行去重。不能出现这种格式：哲学,爱情     爱情</span></span><br><span class="line">        List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">        authors.stream()</span><br><span class="line">                .flatMap(author -&gt; author.getBooks().stream())</span><br><span class="line">                .distinct()</span><br><span class="line">                .flatMap(book -&gt; Arrays.stream(book.getCategory().split(<span class="string">&quot;,&quot;</span>)))</span><br><span class="line">                .distinct()</span><br><span class="line">                .forEach(category-&gt; System.out.println(category));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h4><h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><h4 id="max-min"><a href="#max-min" class="headerlink" title="max&amp;min"></a>max&amp;min</h4><h4 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h4><ol>
<li>Collectors.toMap() 底层调用的，HashMap 的 merge() 方法会引发 NPE</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phoneNumber;</span><br><span class="line">     <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;Person&gt; bookList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">bookList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;18163138123&quot;</span>));</span><br><span class="line">bookList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;martin&quot;</span>,<span class="literal">null</span>));</span><br><span class="line"><span class="comment">// 空指针异常</span></span><br><span class="line">bookList.stream().collect(Collectors.toMap(Person::getName, Person::getPhoneNumber));</span><br></pre></td></tr></table></figure>

<p>解决方法 1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Optoinal处理null</span></span><br><span class="line">bookList.stream().collect(Collectors.toMap(Person::getName,node -&gt; Optional.ofNullable(node.getName()).orElse(<span class="string">&quot;&quot;</span>),(a,b)-&gt;a));</span><br></pre></td></tr></table></figure>

<p>解决方法 2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不使用toMap()方法,直接在collect中构建map</span></span><br><span class="line">Map&lt;String, String&gt; map = list.stream().collect(</span><br><span class="line">        HashMap::<span class="keyword">new</span>,</span><br><span class="line">        (m,node) -&gt; m.put(node.getId(),node.getId()),</span><br><span class="line">        HashMap::putAll</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>参考自：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40493969/article/details/108690223">https://blog.csdn.net/weixin_40493969/article/details/108690223</a></p>
<ol start="2">
<li>相同 key 导致的报错处理</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bookList.stream().collect(Collectors.toMap(Person::getId, v -&gt; v, (a,b)-&gt;a));</span><br></pre></td></tr></table></figure>

<p>第一个参数：Person:getId 表示选择 Person 的 getId 作为 map 的 key 值；<br>第二个参数：v-&gt;v 表示选择将原来的对象作为 Map 的 value 值;<br>第三个参数：(a,b)-&gt;a 中，如果 a 与 b 的 key 值相同，选择 a 作为那个 key 所对应的 value 值。</p>
<h4 id="anyMatch"><a href="#anyMatch" class="headerlink" title="anyMatch"></a>anyMatch</h4><p>判断是否有任意符合匹配条件的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        判断是否有年龄在29以上的作家</span></span><br><span class="line">        List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> authors.stream()</span><br><span class="line">                .anyMatch(author -&gt; author.getAge() &gt; <span class="number">29</span>);</span><br><span class="line">        System.out.println(flag);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="allMatch"><a href="#allMatch" class="headerlink" title="allMatch"></a>allMatch</h4><p>判断是否都符合匹配条件，结果为 boolean 类型。如果都符合结果为 true，否则结果为 false。</p>
<h4 id="noneMatch"><a href="#noneMatch" class="headerlink" title="noneMatch"></a>noneMatch</h4><p>判断流中的元素是否都不符合匹配条件。如果都不符合结果为 true，否则结果为 false</p>
<h4 id="findAny"><a href="#findAny" class="headerlink" title="findAny"></a>findAny</h4><p>获取流中的任意一个元素</p>
<h4 id="findFirst"><a href="#findFirst" class="headerlink" title="findFirst"></a>findFirst</h4><h4 id="reduce-归并"><a href="#reduce-归并" class="headerlink" title="reduce 归并"></a>reduce 归并</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        使用reduce求所有作者年龄的和</span></span><br><span class="line">        List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">sum</span> <span class="operator">=</span> authors.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .map(author -&gt; author.getAge())</span><br><span class="line">                .reduce(<span class="number">0</span>, (result, element) -&gt; result + element);</span><br><span class="line">        System.out.println(sum);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        使用reduce求所有作者中年龄的最小值</span></span><br><span class="line">List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">Optional&lt;Integer&gt; minOptional = authors.stream()</span><br><span class="line">        .map(author -&gt; author.getAge())</span><br><span class="line">        .reduce((result, element) -&gt; result &gt; element ? element : result);</span><br><span class="line">minOptional.ifPresent(age-&gt; System.out.println(age));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Author</span> <span class="variable">author</span> <span class="operator">=</span> getAuthor();</span><br><span class="line">Optional&lt;Author&gt; authorOptional = Optional.ofNullable(author);</span><br><span class="line"></span><br><span class="line">authorOptional.ifPresent(author -&gt; System.out.println(author.getName()));</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Author&gt; authorOptional = Optional.ofNullable(getAuthor());</span><br><span class="line"><span class="type">Author</span> <span class="variable">author1</span> <span class="operator">=</span> authorOptional.orElseGet(() -&gt; <span class="keyword">new</span> <span class="title class_">Author</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Author&gt; authorOptional = Optional.ofNullable(getAuthor());</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Author</span> <span class="variable">author</span> <span class="operator">=</span> authorOptional.orElseThrow((Supplier&lt;Throwable&gt;) () -&gt; <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;author为空&quot;</span>));</span><br><span class="line">    System.out.println(author.getName());</span><br><span class="line">&#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">    throwable.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><p><strong>只有一个抽象方法</strong>的接口我们称之为函数接口。</p>
<p>​ JDK 的函数式接口都加上了**@FunctionalInterface** 注解进行标识。但是无论是否加上该注解只要接口中只有一个抽象方法，都是函数式接口。</p>
<p>供给，函数，消费，断言型</p>
<p>Supplier，Function，Consumer，Predicate（and，or，negate）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">Stream&lt;Author&gt; authorStream = authors.stream();</span><br><span class="line">authorStream.filter(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;Author&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Author author)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> author.getAge()&gt;<span class="number">17</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;.and(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;Author&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Author author)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> author.getName().length()&gt;<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)).forEach(author -&gt; System.out.println(author));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        打印作家中年龄不大于17的作家。</span></span><br><span class="line">        List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">        authors.stream()</span><br><span class="line">                .filter(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;Author&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Author author)</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> author.getAge()&gt;<span class="number">17</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;.negate()).forEach(author -&gt; System.out.println(author.getAge()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>​ 如果我们在重写方法的时候，方法体中<strong>只有一行代码</strong>，并且这行代码是<strong>调用了某个对象的成员方法</strong>，并且我们把要重写的<strong>抽象方法中所有的参数都按照顺序传入了这个成员方法中</strong>，这个时候我们就可以引用对象的实例方法</p>
<p>类名或者对象名::方法名</p>
<p>author -&gt; author.getName() &#x3D;=&#x3D;&gt; Author::getName<br>age -&gt;String.valueOf(age) &#x3D;=&#x3D;&gt; String::valueOf</p>
<h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h3><h4 id="基本数据类型优化"><a href="#基本数据类型优化" class="headerlink" title="基本数据类型优化"></a>基本数据类型优化</h4><p>自动装箱和自动拆箱让我们在使用对应的包装类时就好像使用基本数据类型一样方便。但是你一定要知道装箱和拆箱肯定是要消耗时间的。虽然这个时间消耗很下。但是在大量的数据不断的重复装箱拆箱的时候，你就不能无视这个时间损耗了。</p>
<p>所以为了让我们能够对这部分的时间消耗进行优化。Stream 还提供了很多专门针对基本数据类型的方法。</p>
<p>mapToInt,mapToLong,mapToDouble,flatMapToInt,flatMapToDouble 等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test27</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">    authors.stream()</span><br><span class="line">            .map(author -&gt; author.getAge())</span><br><span class="line">            .map(age -&gt; age + <span class="number">10</span>)</span><br><span class="line">            .filter(age-&gt;age&gt;<span class="number">18</span>)</span><br><span class="line">            .map(age-&gt;age+<span class="number">2</span>)</span><br><span class="line">            .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    authors.stream()</span><br><span class="line">            .mapToInt(author -&gt; author.getAge())</span><br><span class="line">            .map(age -&gt; age + <span class="number">10</span>)</span><br><span class="line">            .filter(age-&gt;age&gt;<span class="number">18</span>)</span><br><span class="line">            .map(age-&gt;age+<span class="number">2</span>)</span><br><span class="line">            .forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="并行流"><a href="#并行流" class="headerlink" title="并行流"></a>并行流</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test28</span><span class="params">()</span> &#123;</span><br><span class="line">    Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">sum</span> <span class="operator">=</span> stream.parallel()</span><br><span class="line">            .peek(<span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;Integer&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Integer num)</span> &#123;</span><br><span class="line">                    System.out.println(num+Thread.currentThread().getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .filter(num -&gt; num &gt; <span class="number">5</span>)</span><br><span class="line">            .reduce((result, ele) -&gt; result + ele)</span><br><span class="line">            .get();</span><br><span class="line">    System.out.println(sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Author&gt; authors = getAuthors();</span><br><span class="line">authors.parallelStream()</span><br><span class="line">        .map(author -&gt; author.getAge())</span><br><span class="line">        .map(age -&gt; age + <span class="number">10</span>)</span><br><span class="line">        .filter(age-&gt;age&gt;<span class="number">18</span>)</span><br><span class="line">        .map(age-&gt;age+<span class="number">2</span>)</span><br><span class="line">        .forEach(System.out::println);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><h3 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> Product <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">   <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> productService.findById(id);</span><br><span class="line">   product.setProductName(<span class="string">&quot;访问的服务地址:&quot;</span>+ip + <span class="string">&quot;:&quot;</span> + port);</span><br><span class="line">   <span class="keyword">return</span> product;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Feign"><a href="#Feign" class="headerlink" title="Feign"></a>Feign</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 声明需要调用的微服务名称</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@FeignClient</span></span></span><br><span class="line"><span class="comment"> *  name : 服务提供者的名称</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient(name=&quot;service-product&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductFeignClient</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置需要调用的微服务接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="meta">@RequestMapping(value=&quot;/product/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">   <span class="keyword">public</span> Product <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="RestTemplate"><a href="#RestTemplate" class="headerlink" title="RestTemplate"></a>RestTemplate</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate ;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/buy/&#123;id&#125;&quot;, method = RequestMethod.GET )</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findById</span> <span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">   <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">   restTemplate.getForObject(<span class="string">&quot;http://127.0.0.1:9001/product/1&quot;</span>, product.class);</span><br><span class="line">   <span class="keyword">return</span> product ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="set-注入"><a href="#set-注入" class="headerlink" title="set 注入"></a>set 注入</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    UserDao userDao;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span> <span class="params">(UserDao userDao)</span>&#123;</span><br><span class="line">         <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">         userDao.getUser();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag"> http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--bean就是java对象 , 由Spring创建和管理--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoOracleImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.UserDaoOracleImpl&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.service.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//解析beans.xml文件 , 生成管理相应的Bean对象</span></span><br><span class="line"> <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">lassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"> <span class="type">UserService</span> <span class="variable">userServiceImpl</span> <span class="operator">=</span> (UserService)context.getBean(<span class="string">&quot;UserServiceImpl&quot;</span>);</span><br><span class="line"> userServiceImpl.getUser();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="无参构造方法"><a href="#无参构造方法" class="headerlink" title="无参构造方法"></a>无参构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;user无参构造方法&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag"> http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;kuangshen&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="代码配置"><a href="#代码配置" class="headerlink" title="代码配置"></a>代码配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(User.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UuConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小王&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">annotationConfigApplicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(UuConfig.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User)annotationConfigApplicationContext.getBean(<span class="string">&quot;getUser&quot;</span>);</span><br><span class="line">        System.out.println(u.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//代理角色，在这里面增加日志的实现</span><br><span class="line">public class UserServiceProxy implements UserService &#123;</span><br><span class="line">   private UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">   public void setUserService(UserServiceImpl userService) &#123;</span><br><span class="line">       this.userService = userService;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   public void add() &#123;</span><br><span class="line">       log(&quot;add&quot;);</span><br><span class="line">       userService.add();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   public void delete() &#123;</span><br><span class="line">       log(&quot;delete&quot;);</span><br><span class="line">       userService.delete();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   public void update() &#123;</span><br><span class="line">       log(&quot;update&quot;);</span><br><span class="line">       userService.update();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   public void query() &#123;</span><br><span class="line">       log(&quot;query&quot;);</span><br><span class="line">       userService.query();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   public void log(String msg)&#123;</span><br><span class="line">       System.out.println(&quot;执行了&quot;+msg+&quot;方法&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.InvocationHandler;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line">public class ProxyInvocatonHandler implements InvocationHandler &#123;</span><br><span class="line">    private Rent rent;</span><br><span class="line"></span><br><span class="line">    public void setRent(Rent rent) &#123;</span><br><span class="line">        this.rent = rent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object getProxy() &#123;</span><br><span class="line">        return Proxy.newProxyInstance(this.getClass().getClassLoader(),</span><br><span class="line">                rent.getClass().getInterfaces(), this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object invoke(Object o, Method method, Object[] objects) throws Throwable &#123;</span><br><span class="line">        Object result = method.invoke(rent, objects);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ProxyInvocatonHandler proxyInvocatonHandler = new ProxyInvocatonHandler();</span><br><span class="line">        proxyInvocatonHandler.setRent(new Host());</span><br><span class="line">        Rent proxy = (Rent) proxyInvocatonHandler.getProxy();</span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mybatis 调用存储过程</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;call_p_copy_coachinfo&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">   &#123;</span><br><span class="line">   call p_copy_coachinfo(</span><br><span class="line">   #&#123;coach_ids, mode=IN, jdbcType=NUMERIC&#125;,</span><br><span class="line">   #&#123;audit_mans, mode=IN, jdbcType=VARCHAR&#125;</span><br><span class="line">   )</span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="comparator-和-comparable"><a href="#comparator-和-comparable" class="headerlink" title="comparator 和 comparable"></a>comparator 和 comparable</h2><p>comparable 接口实际上是出自 java.lang 包 它有一个 compareTo(Object obj)方法用来排序<br>comparator 接口实际上是出自 java.util 包它有一个 compare(Object obj1, Object obj2)方法用来排序</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_71087031/article/details/124850080">Comparator 和 Comparable 的区别</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       User user1=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;dingli&quot;</span>,<span class="number">25</span>,<span class="literal">true</span>);</span><br><span class="line">       User user2=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;huxiaojuan&quot;</span>,<span class="number">24</span>,<span class="literal">false</span>);</span><br><span class="line">       User user3=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xxx&quot;</span>,<span class="number">24</span>,<span class="literal">false</span>);</span><br><span class="line">       List&lt;User&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">       list.add(user1);</span><br><span class="line">       list.add(user2);</span><br><span class="line">       list.add(user3);</span><br><span class="line">       Collections.sort(list, <span class="keyword">new</span> <span class="title class_">User</span>()); <span class="comment">//类实现了的Comparator能满足需求</span></span><br><span class="line">       System.out.println(<span class="string">&quot;类自身实现Comparator:&quot;</span>+list);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//现在我想要按照名字升序，显然类中实现的不能满足要求，于是可以在类外自己实现想要的比较器</span></span><br><span class="line">       Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;User&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(User o1, User o2)</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> o1.getName().compareTo(o2.getName()); <span class="comment">//按照名字升序</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       System.out.println(<span class="string">&quot;匿名内部类方式：&quot;</span>+list);</span><br><span class="line">       <span class="comment">//由于Comparator接口是一个函数式接口，因此根据jdk1.8新特性，我们可以采用Lambda表达式简化代码</span></span><br><span class="line">       Collections.sort(list,(u1,u2)-&gt;&#123;<span class="keyword">return</span> u1.getName().compareTo(u2.getName());&#125;);</span><br><span class="line">       System.out.println(<span class="string">&quot;Lambda表达式方式：&quot;</span>+list);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>对于 Comparator 而言，o2 是 List 排序前，两两之间的前一个数，o1 是后一个数；<br>而 compareTo，比如“o1.compareTo(o2)”，相当于 o1&gt;o2 的判断，true 时返回 1；<br>而 sort 在接收到 1，或者 0（1 会更稳定）时都不会改变顺序，只有-1 或者其他负数才会。</p>
<p>简单来说，降序我们使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o2.getIntValue(&quot;weights&quot;).compareTo(o1.getIntValue(&quot;weights&quot;))</span><br></pre></td></tr></table></figure>

<p>升序我们使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o1.getIntValue(&quot;distancenum&quot;).compareTo(o2.getIntValue(&quot;distancenum&quot;))</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Saintmm/article/details/125218362">Java 自定义 Comparator 实现复杂排序（什么情况返回-1？返回 0？返回 1？）</a></p>
<h3 id="comparator-比较器"><a href="#comparator-比较器" class="headerlink" title="comparator 比较器"></a>comparator 比较器</h3><p>推荐使用</p>
<p>Collections.sort（） 对 ArrayList 排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建集合对象</span></span><br><span class="line">        ArrayList&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list1.add(<span class="number">10</span>);</span><br><span class="line">        list1.add(<span class="number">60</span>);</span><br><span class="line">        list1.add(<span class="number">20</span>);</span><br><span class="line">        list1.add(<span class="number">80</span>);</span><br><span class="line">        list1.add(<span class="number">30</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 60, 20, 80, 30]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 排序(默认排序，自然排序)</span></span><br><span class="line">        Collections.sort(list1);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 20, 30, 60, 80]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 升序排序！</span></span><br><span class="line">        Collections.sort(list1, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="comment">// 此方法是排序的核心</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后 升序！ 后-前 降序！(前后针对的是2个参数o)</span></span><br><span class="line">                <span class="keyword">return</span> o1-o2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 20, 30, 60, 80]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 降序排序！</span></span><br><span class="line">        Collections.sort(list1, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="comment">// 此方法是排序的核心</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后 升序！ 后-前 降序！(前后针对的是2个参数o)</span></span><br><span class="line">                <span class="keyword">return</span> o2-o1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[80, 60, 30, 20, 10]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test03</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建集合</span></span><br><span class="line">        ArrayList&lt;String&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list3.add(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;bbd&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;cbd&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;bac&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bbd, cbd, bac]</span></span><br><span class="line">        <span class="comment">// 默认排序</span></span><br><span class="line">        Collections.sort(list2);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自己指定规则(升序！)</span></span><br><span class="line">        Collections.sort(list2, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后：升序； 后-前：降序！</span></span><br><span class="line">                <span class="keyword">return</span> o1.charAt(<span class="number">0</span>)-o3.charAt(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 降序！</span></span><br><span class="line">        Collections.sort(list2, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 后-前：降序！</span></span><br><span class="line">                <span class="keyword">return</span> o3.charAt(<span class="number">0</span>)-o1.charAt(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TreeMap 指定比较器（默认是按 key 的升序排序）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TreeMap&lt;Person, String&gt; treeMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Person&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Person person1, Person person2)</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> person1.getAge() - person2.getAge();</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(num, <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">3</span>), <span class="string">&quot;person1&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">18</span>), <span class="string">&quot;person2&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">35</span>), <span class="string">&quot;person3&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">16</span>), <span class="string">&quot;person4&quot;</span>);</span><br><span class="line">        treeMap.entrySet().stream().forEach(personStringEntry -&gt; &#123;</span><br><span class="line">            System.out.println(personStringEntry.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="comparable"><a href="#comparable" class="headerlink" title="comparable"></a>comparable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// person对象没有实现Comparable接口，所以必须实现，这样才不会出错，才可以使treemap中的数据按顺序排列</span></span><br><span class="line"><span class="comment">// 前面一个例子的String类已经默认实现了Comparable接口，详细可以查看String类的API文档，另外其他</span></span><br><span class="line"><span class="comment">// 像Integer类等都已经实现了Comparable接口，所以不需要另外实现了</span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Person&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * T重写compareTo方法实现按年龄来排序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Person o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.age &gt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.age &lt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      TreeMap&lt;Person, String&gt; pdata = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;Person, String&gt;();</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">30</span>), <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">20</span>), <span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">10</span>), <span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;小红&quot;</span>, <span class="number">5</span>), <span class="string">&quot;xiaohong&quot;</span>);</span><br><span class="line">      <span class="comment">// 得到key的值的同时得到key所对应的值</span></span><br><span class="line">      Set&lt;Person&gt; keys = pdata.keySet();</span><br><span class="line">      <span class="keyword">for</span> (Person key : keys) &#123;</span><br><span class="line">          System.out.println(key.getAge() + <span class="string">&quot;-&quot;</span> + key.getName());</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5-小红</span><br><span class="line">10-王五</span><br><span class="line">20-李四</span><br><span class="line">30-张三</span><br></pre></td></tr></table></figure>

<h3 id="Bug-清单"><a href="#Bug-清单" class="headerlink" title="Bug 清单"></a>Bug 清单</h3><p>可以这样记录一些有意义的 bug:</p>
<p>【日期】：***</p>
<p>【问题】：***</p>
<p>【原因】：***</p>
<p>【如何发现】：***</p>
<p>【如何修复】：***</p>
<p>【总结】：***</p>
<hr>
<p>【日期】：2023 年 4 月 12 日</p>
<p>【问题】：多数据源，指定了数据源 ppas21，手动写的线上库数据连接配置，明确了线上库有表，但是就是访问不到这个表，报错不存在。</p>
<p>【原因】：使用了 nacos 配置中心的，配置中心配置的 ppas21 是测试库的，而测试库是没有表的。</p>
<p>【如何发现】：排查了注解指定不成功，代码指定数据源，都不成功。检查了用户默认数据源没问题。突然想到了以前出现过 nacos 和 application 都配置了同名数据源的情况，遂去检查 nacos 的配置，发现了配置的是测试的库。</p>
<p>【如何修复】：注释掉 nacos 的测试库，在本地配置中增加线上数据源。</p>
<p>【总结】：配置的加载顺序是，bootstrap-dev.properties → application-dev.properties，检查配置先去配置中心看看，或许自己没有加但是别人加了数据源，然后在排查本地数据源的问题。主要还是有段时间没有动数据源了，生疏了，不敢确定，只能尝试，遂浪费了太多时间。</p>
<h2 id="排序算法"><a href="#排序算法" class="headerlink" title="排序算法"></a>排序算法</h2><p>动画图解：九大经典排序算法<br><a target="_blank" rel="noopener" href="https://www.v2ex.com/t/938103#reply1">https://www.v2ex.com/t/938103#reply1</a></p>
<p>用 HTML5 实现的各种排序算法的动画比较 <a target="_blank" rel="noopener" href="https://www.webhek.com/post/comparison-sort/">https://www.webhek.com/post/comparison-sort/</a></p>
<h2 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h2><h3 id="LocalDate"><a href="#LocalDate" class="headerlink" title="LocalDate"></a>LocalDate</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43842093/article/details/127200353" title="LocalDate详解">LocalDate 详解</a></p>
<h3 id="JavaWeb-实现文件下载-案例"><a href="#JavaWeb-实现文件下载-案例" class="headerlink" title="JavaWeb 实现文件下载 (案例)"></a>JavaWeb 实现文件下载 (案例)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServlet</span>  <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 1. 要获取下载文件的路径</span></span><br><span class="line"><span class="comment">        * 2. 下载的文件名是啥</span></span><br><span class="line"><span class="comment">        * 3. 设置想办法让浏览器能够支持下载我们需要的东西</span></span><br><span class="line"><span class="comment">        * 4. 获取下载文件的输入流</span></span><br><span class="line"><span class="comment">        * 5. 创建缓冲区</span></span><br><span class="line"><span class="comment">        * 6. 获取OutputStream对象</span></span><br><span class="line"><span class="comment">        * 7. 将FileOutPutStream流写入到buffer缓冲区</span></span><br><span class="line"><span class="comment">        * 8. 使用OutPutStream将缓冲区中的数据输出到客户端</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.获取下载文件的路径</span></span><br><span class="line">        <span class="comment">//ServletContext servletContext = this.getServletContext();</span></span><br><span class="line">        <span class="comment">//String realPath1 = servletContext.getRealPath();</span></span><br><span class="line"></span><br><span class="line">        String realPath=<span class="string">&quot;C:\\Users\\HP\\Desktop\\1.png&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.下载的文件名是啥</span></span><br><span class="line">        String fileName=realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//3.设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename&quot;</span>+ URLEncoder.encode(fileName,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="comment">//4.获取下载文件的输入流</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">        <span class="comment">//5.创建缓冲区</span></span><br><span class="line">        <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buffer=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//6.获取OutputStream对象</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        <span class="comment">//7.将FileOutPutStream溢写入到buffer缓冲区，使用OutPutStream将缓冲区的数据输出到客户端</span></span><br><span class="line">        <span class="keyword">while</span>((len=in.read(buffer))&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            out.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="pdf-工具类"><a href="#pdf-工具类" class="headerlink" title="pdf 工具类"></a>pdf 工具类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">package com.aos.supervision.api.utils</span><br><span class="line"></span><br><span class="line">import com.aos.supervision.api.service.DubboService</span><br><span class="line">import com.itextpdf.text.Document</span><br><span class="line">import com.itextpdf.text.Image</span><br><span class="line">import com.itextpdf.text.pdf.BaseFont</span><br><span class="line">import com.itextpdf.text.pdf.PdfCopy</span><br><span class="line">import com.itextpdf.text.pdf.PdfReader</span><br><span class="line">import com.itextpdf.text.pdf.PdfStamper</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired</span><br><span class="line">import org.springframework.stereotype.Component</span><br><span class="line">import java.io.ByteArrayOutputStream</span><br><span class="line">import java.io.File</span><br><span class="line">import java.io.FileOutputStream</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">class PdfUtils &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    lateinit var dubboService: DubboService</span><br><span class="line"></span><br><span class="line">    fun generatePdf(template: String, map: Map&lt;String, String?&gt;, images: Map&lt;String, String&gt;?): String? &#123;</span><br><span class="line">        val fileName = template.substring(0, template.lastIndexOf(&quot;.&quot;) + 1)</span><br><span class="line">        val fis = Thread.currentThread().contextClassLoader.getResourceAsStream(template)</span><br><span class="line">        val pdfReader = PdfReader(fis)</span><br><span class="line">        val bos = ByteArrayOutputStream()</span><br><span class="line">        val stamper = PdfStamper(pdfReader, bos)</span><br><span class="line">        val acroFields = stamper.acroFields</span><br><span class="line">        //设置显示中文</span><br><span class="line">        val bf = BaseFont.createFont(&quot;STSong-Light&quot;, &quot;UniGB-UCS2-H&quot;, BaseFont.NOT_EMBEDDED)</span><br><span class="line">        val fontList = ArrayList&lt;BaseFont&gt;()</span><br><span class="line">        fontList.add(bf)</span><br><span class="line">        acroFields.substitutionFonts = fontList</span><br><span class="line">        val it = acroFields.fields.keys.iterator()</span><br><span class="line">        while (it.hasNext()) &#123;</span><br><span class="line">            val name = it.next()</span><br><span class="line">            acroFields.setField(name, map[name])</span><br><span class="line">        &#125;</span><br><span class="line">        // 如果有图片执行</span><br><span class="line">        images?.forEach &#123; (key, value) -&gt;</span><br><span class="line">            val pageNo = acroFields.getFieldPositions(key)[0].page</span><br><span class="line">            val signRect = acroFields.getFieldPositions(key)[0].position</span><br><span class="line">            val x = signRect.left</span><br><span class="line">            val y = signRect.bottom</span><br><span class="line">            // 读图片</span><br><span class="line">            val image: Image = Image.getInstance(value)</span><br><span class="line">            // 获取操作的页面</span><br><span class="line">            val under = stamper.getOverContent(pageNo)</span><br><span class="line">            // 根据域的大小缩放图片</span><br><span class="line">            image.scaleToFit(signRect.width, signRect.height)</span><br><span class="line">            // 添加图片</span><br><span class="line">            image.setAbsolutePosition(x, y)</span><br><span class="line">            under.addImage(image)</span><br><span class="line">        &#125;</span><br><span class="line">        //如果为false那么生成的PDF文件还能编辑</span><br><span class="line">        stamper.setFormFlattening(true)</span><br><span class="line">        stamper.close()</span><br><span class="line">        val file = File.createTempFile(fileName, &quot;.pdf&quot;)</span><br><span class="line">        val out = FileOutputStream(file)</span><br><span class="line">        val doc = Document()</span><br><span class="line">        val copy = PdfCopy(doc, out)</span><br><span class="line">        doc.open()</span><br><span class="line">        for(i in 1..pdfReader.numberOfPages) &#123;</span><br><span class="line">            val importedPage = copy.getImportedPage(PdfReader(bos.toByteArray()), i)</span><br><span class="line">            copy.addPage(importedPage)</span><br><span class="line">        &#125;</span><br><span class="line">        doc.close()</span><br><span class="line">        return dubboService.uploadFile(file.readBytes(), &quot;pdf&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="逆向工程"><a href="#逆向工程" class="headerlink" title="逆向工程"></a>逆向工程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">package com.generator</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.annotation.DbType</span><br><span class="line">import com.baomidou.mybatisplus.annotation.IdType</span><br><span class="line">import com.baomidou.mybatisplus.core.toolkit.StringPool</span><br><span class="line">import com.baomidou.mybatisplus.generator.AutoGenerator</span><br><span class="line">import com.baomidou.mybatisplus.generator.InjectionConfig</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.*</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.converts.PostgreSqlTypeConvert</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.po.TableInfo</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.DbColumnType</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy</span><br><span class="line">import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine</span><br><span class="line">import org.junit.Ignore</span><br><span class="line">import org.junit.Test</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest</span><br><span class="line">import java.util.*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@SpringBootTest</span><br><span class="line">class GeneratorTest &#123;</span><br><span class="line"></span><br><span class="line">    fun generator() &#123;</span><br><span class="line">        println(&quot;begin generating&quot;)</span><br><span class="line">        val projectPath = System.getProperty(&quot;user.dir&quot;)</span><br><span class="line"></span><br><span class="line">        var mpg = AutoGenerator()</span><br><span class="line"></span><br><span class="line">        var globalConfig = GlobalConfig();</span><br><span class="line">        globalConfig.isKotlin = true</span><br><span class="line">        globalConfig.author = &quot;wx&quot;</span><br><span class="line">        globalConfig.isOpen = false</span><br><span class="line">        globalConfig.outputDir = &quot;$projectPath/src/main/kotlin&quot;</span><br><span class="line">        globalConfig.isFileOverride = true</span><br><span class="line">        globalConfig.idType = IdType.AUTO</span><br><span class="line">        globalConfig.xmlName = &quot;%sMapper&quot;</span><br><span class="line">        globalConfig.mapperName = &quot;%sMapper&quot;</span><br><span class="line">        globalConfig.serviceImplName = &quot;%sServiceImpl&quot;</span><br><span class="line">        globalConfig.controllerName = &quot;%sController&quot;</span><br><span class="line">        globalConfig.isBaseColumnList = true</span><br><span class="line">        globalConfig.isBaseResultMap = true</span><br><span class="line"></span><br><span class="line">        mpg.globalConfig = globalConfig</span><br><span class="line"></span><br><span class="line">        var dsc = DataSourceConfig()</span><br><span class="line"></span><br><span class="line">        dsc.setTypeConvert &#123; config, fieldType -&gt;</span><br><span class="line">            if (fieldType.toLowerCase().contains(&quot;timestamp&quot;) || fieldType.toLowerCase().contains(&quot;datetime&quot;)) &#123;</span><br><span class="line">                DbColumnType.DATE</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                PostgreSqlTypeConvert().processTypeConvert(config, fieldType)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      // 驱动类型</span><br><span class="line">        dsc.dbType = DbType.MYSQL</span><br><span class="line">        dsc.driverName = &quot;com.mysql.cj.jdbc.Driver&quot;</span><br><span class="line">        dsc.url = &quot;jdbc:mysql://192.168.0.35:3306/capital_db?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&quot;</span><br><span class="line">        dsc.username = &quot;root&quot;</span><br><span class="line">        dsc.password = &quot;admin&quot;</span><br><span class="line"></span><br><span class="line">//        dsc.dbType = DbType.POSTGRE_SQL</span><br><span class="line">//        dsc.driverName = &quot;org.postgresql.Driver&quot;</span><br><span class="line">//        dsc.url = &quot;jdbc:postgresql://192.168.0.36:3308/ad-manage?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&quot;</span><br><span class="line">//        dsc.username = &quot;ad&quot;</span><br><span class="line">//        dsc.password = &quot;safeluck&quot;</span><br><span class="line">//        dsc.schemaName = &quot;aynbsim&quot;</span><br><span class="line"></span><br><span class="line">        mpg.dataSource = dsc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 自定义配置</span><br><span class="line">        val cfg: InjectionConfig = object : InjectionConfig() &#123;</span><br><span class="line">            override fun initMap() &#123;</span><br><span class="line">                // to do nothing</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        val focList: MutableList&lt;FileOutConfig&gt; = ArrayList()</span><br><span class="line">        focList.add(object : FileOutConfig(&quot;/templates/mapper.xml.ftl&quot;) &#123;</span><br><span class="line">            override fun outputFile(tableInfo: TableInfo): String? &#123;</span><br><span class="line">                tableInfo.comment=&quot;描述&quot;//这里不加描述 自动生成报错</span><br><span class="line">                // 自定义输入文件名称</span><br><span class="line">                return (projectPath.toString() + &quot;/src/main/resources/mapper/&quot;</span><br><span class="line">                        + tableInfo.entityName + &quot;Mapper&quot; + StringPool.DOT_XML)</span><br><span class="line">            &#125;        &#125;)</span><br><span class="line">        cfg.fileOutConfigList = focList</span><br><span class="line">        mpg.cfg = cfg</span><br><span class="line">        mpg.template = TemplateConfig()</span><br><span class="line">                .setXml(&quot;&quot;)</span><br><span class="line">//                .setEntity(&quot;&quot;)</span><br><span class="line">                .setController(&quot;&quot;)</span><br><span class="line">                .setService(&quot;&quot;)</span><br><span class="line">                .setServiceImpl(&quot;&quot;)</span><br><span class="line">//                .setMapper(&quot;&quot;)</span><br><span class="line"></span><br><span class="line">        var sc = StrategyConfig()</span><br><span class="line">//        sc.columnNaming = NamingStrategy.no_change</span><br><span class="line">        sc.columnNaming = NamingStrategy.underline_to_camel</span><br><span class="line"></span><br><span class="line">      // 表名</span><br><span class="line">//        sc.setInclude(&quot;aduser&quot;,&quot;manage_menu&quot;,&quot;manage_role&quot;,&quot;manage_role_menu&quot;,&quot;manage_user_role&quot;,&quot;sys_user_session&quot;)</span><br><span class="line">        sc.setInclude(&quot;student&quot;)</span><br><span class="line">//        sc.naming = NamingStrategy.no_change</span><br><span class="line">        sc.naming = NamingStrategy.underline_to_camel</span><br><span class="line">        sc.isEntityLombokModel = true</span><br><span class="line">//        sc.superControllerClass = &quot;com.aos.base.controller.BaseController&quot;</span><br><span class="line">//        sc.superServiceClass = &quot;com.aos.base.service.BaseService&quot;</span><br><span class="line">        sc.isRestControllerStyle = true</span><br><span class="line">        mpg.strategy = sc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      // 生成路径</span><br><span class="line">        var pkConfig = PackageConfig()</span><br><span class="line">        pkConfig.parent = &quot;com.safeluck.capital.api&quot;</span><br><span class="line">        pkConfig.controller = &quot;controller&quot;</span><br><span class="line">        pkConfig.entity = &quot;po&quot;</span><br><span class="line">        pkConfig.service = &quot;service&quot;</span><br><span class="line">        pkConfig.mapper = &quot;dao&quot;</span><br><span class="line">        mpg.packageInfo = pkConfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        mpg.templateEngine = FreemarkerTemplateEngine()</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下载配置信息"><a href="#下载配置信息" class="headerlink" title="下载配置信息"></a>下载配置信息</h3><p>download response param</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">response.contentType = &quot;application/vnd.ms-excel&quot;</span><br><span class="line">response.characterEncoding = &quot;utf-8&quot;</span><br><span class="line">val fileName: String = URLEncoder.encode(fileName, &quot;UTF-8&quot;)</span><br><span class="line">response.setHeader(&quot;Content-disposition&quot;, &quot;attachment;filename=$fileName.xlsx&quot;)</span><br><span class="line"></span><br><span class="line">public void download(HttpServletResponse response) throws IOException &#123;</span><br><span class="line">    response.setContentType(&quot;application/vnd.ms-excel&quot;);</span><br><span class="line">    response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line">    // 这里URLEncoder.encode可以防止中文乱码 当然和easyexcel没有关系</span><br><span class="line">    String fileName = URLEncoder.encode(&quot;测试&quot;, &quot;UTF-8&quot;);</span><br><span class="line">    response.setHeader(&quot;Content-disposition&quot;, &quot;attachment;filename=&quot; + fileName + &quot;.xlsx&quot;);</span><br><span class="line">   // response.getOutputStream()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="行列转换"><a href="#行列转换" class="headerlink" title="行列转换"></a>行列转换</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Hudas/article/details/124055641">(22 条消息) SQL 行列转换_山茶花开时。的博客-CSDN 博客_sql 行列转换</a></p>
<h3 id="base64-码前缀"><a href="#base64-码前缀" class="headerlink" title="base64 码前缀"></a>base64 码前缀</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:image/jpg;base64,</span><br></pre></td></tr></table></figure>

<h3 id="物理分页"><a href="#物理分页" class="headerlink" title="物理分页"></a>物理分页</h3><p>借助于数据库等物理介质</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table limit (start-1)*pageSize,pageSize</span><br></pre></td></tr></table></figure>

<h3 id="逻辑分页"><a href="#逻辑分页" class="headerlink" title="逻辑分页"></a>逻辑分页</h3><p>前端或者服务器进行分页，一次性查出所有数据到内存中，查询时从内存中取出相应索引区间的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">val</span> <span class="variable">List</span> <span class="operator">=</span> xxService.selectAllData();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从第⼏条数据开始</span></span><br><span class="line"><span class="type">int</span> <span class="variable">firstIndex</span> <span class="operator">=</span>(currPage -<span class="number">1</span>)* pageSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 到第⼏条数据结束</span></span><br><span class="line"><span class="type">int</span> <span class="variable">lastIndex</span> <span class="operator">=</span> currPage * pageSize;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> students.subList(firstIndex, lastIndex)</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstIndex = limit * (page - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> lastIndex = limit * page</span><br><span class="line"><span class="comment">// 防止越界</span></span><br><span class="line"><span class="keyword">if</span> (lastIndex &gt; schoolList.size) &#123;</span><br><span class="line">    lastIndex = schoolList.size</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (firstIndex &gt; schoolList.size) &#123;</span><br><span class="line">    firstIndex = schoolList.size</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="list-集合转换字符串拼接"><a href="#list-集合转换字符串拼接" class="headerlink" title="list 集合转换字符串拼接"></a>list 集合转换字符串拼接</h3><p>String.join()方法用法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class TestJoin &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        list.add(&quot;111&quot;);</span><br><span class="line">        list.add(&quot;222&quot;);</span><br><span class="line">        list.add(&quot;333&quot;);</span><br><span class="line">        list.add(&quot;444&quot;);</span><br><span class="line">        String str = String.join(&quot;/&quot;,list);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        输出： 111/222/333/444</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="后台下载文件返回流"><a href="#后台下载文件返回流" class="headerlink" title="后台下载文件返回流"></a>后台下载文件返回流</h3><p>后台项目下文件<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/legend_go/article/details/122758702">https://blog.csdn.net/legend_go/article/details/122758702</a></p>
<p>oss<br><a target="_blank" rel="noopener" href="https://www.itxm.cn/post/42374.html">https://www.itxm.cn/post/42374.html</a></p>
<p>http<br><a target="_blank" rel="noopener" href="https://www.csdn.net/tags/MtTakg1sMjM4MjQtYmxvZwO0O0OO0O0O.html">https://www.csdn.net/tags/MtTakg1sMjM4MjQtYmxvZwO0O0OO0O0O.html</a></p>
<h3 id="小工具"><a href="#小工具" class="headerlink" title="小工具"></a>小工具</h3><h4 id="权限处理"><a href="#权限处理" class="headerlink" title="权限处理"></a>权限处理</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数处理</span></span><br><span class="line"><span class="comment"> * 只对unitId做数据权限限制</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> fun <span class="title function_">dealBalanceParam</span><span class="params">(param: PageRequest,  alias:String?)</span> &#123;</span><br><span class="line">    <span class="type">val</span> <span class="variable">unitId</span> <span class="operator">=</span> ParamUtils.getParamDataWithOne(param, <span class="string">&quot;unitId&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="type">val</span> <span class="variable">unitIdIsNull</span> <span class="operator">=</span> (StringUtils.isEmpty(unitId))</span><br><span class="line">    <span class="type">val</span> <span class="variable">aliasIsNull</span> <span class="operator">=</span> (StringUtils.isEmpty(alias))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (unitIdIsNull) &#123;</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ParamUtils.delParamDataWithOne(param, <span class="string">&quot;unitId&quot;</span>)</span><br><span class="line">    <span class="type">var</span> <span class="variable">value</span> <span class="operator">=</span> dataPopedomStrategyService.getUserTypeConditionByUnitId(unitId!!.toBigDecimal(), <span class="string">&quot;t1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (! aliasIsNull) &#123;</span><br><span class="line">        value = value.replace(<span class="string">&quot;ayid&quot;</span>, alias!!)</span><br><span class="line">    &#125;    param.data[<span class="string">&quot;ayids&quot;</span>] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数处理</span></span><br><span class="line"><span class="comment"> * 默认unitId做数据权限限制，为空时去session中的unitType值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> fun <span class="title function_">dealBalanceParam</span><span class="params">(param: PageRequest, session: SysUserSession, alias:String?)</span> &#123;</span><br><span class="line">    <span class="type">var</span> <span class="variable">unitId</span> <span class="operator">=</span> ParamUtils.getParamDataWithOne(param, <span class="string">&quot;unitId&quot;</span>)</span><br><span class="line">    val unitType= session.unitType</span><br><span class="line"></span><br><span class="line">    <span class="type">val</span> <span class="variable">unitIdIsNull</span> <span class="operator">=</span> (StringUtils.isEmpty(unitId))</span><br><span class="line">    <span class="type">val</span> <span class="variable">unitTypeIsNull</span> <span class="operator">=</span> (StringUtils.isEmpty(unitType))</span><br><span class="line">    <span class="type">val</span> <span class="variable">aliasIsNull</span> <span class="operator">=</span> (StringUtils.isEmpty(alias))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (unitIdIsNull &amp;&amp; unitTypeIsNull) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (unitIdIsNull) &#123;</span><br><span class="line">        <span class="comment">// 默认session.unitType权限控制</span></span><br><span class="line">        unitId = unitType</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 根据传入unitId权限控制, 优先以传入为准</span></span><br><span class="line">        ParamUtils.delParamDataWithOne(param, <span class="string">&quot;unitId&quot;</span>)</span><br><span class="line">    &#125;    <span class="type">var</span> <span class="variable">value</span> <span class="operator">=</span> dataPopedomStrategyService.getUserTypeConditionByUnitId(unitId!!.toBigDecimal(), <span class="string">&quot;t1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (! aliasIsNull) &#123;</span><br><span class="line">        value = value.replace(<span class="string">&quot;ayid&quot;</span>, alias!!)</span><br><span class="line">    &#125;    param.data[<span class="string">&quot;ayids&quot;</span>] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="代码行转列"><a href="#代码行转列" class="headerlink" title="代码行转列"></a>代码行转列</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// list转为map，根据subject, fee的值，适用于sql无法支持的**动态**列转行，重复的会被替换掉</span></span><br><span class="line"><span class="keyword">private</span> fun <span class="title function_">listToMap</span><span class="params">(list: List&lt;JavaMap&gt;)</span>: MutableMap&lt;Any?, Any?&gt; &#123;</span><br><span class="line">    <span class="type">val</span> <span class="variable">map</span> <span class="operator">=</span> mutableMapOf&lt;Any?,Any?&gt;()</span><br><span class="line">    list.forEach &#123;</span><br><span class="line">        map.put(it.getString(<span class="string">&quot;subject&quot;</span>), it.getIntValue(<span class="string">&quot;fee&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> map</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="参数处理工具类"><a href="#参数处理工具类" class="headerlink" title="参数处理工具类"></a>参数处理工具类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">        * @Description: 获取param中的参数,只适用取单个，such：String</span><br><span class="line">        * @Param: name(和前端传输的字段名保持一致，key)</span><br><span class="line">        * @Return:</span><br><span class="line">        * @Author: CJ</span><br><span class="line">        * @Date: 2021/7/2 10:58</span><br><span class="line">        **/</span><br><span class="line">       fun getParamDataWithOne(param: PageRequest, name:String ):String? &#123;</span><br><span class="line">           var value:String? = null</span><br><span class="line">           if(param.queryRequest == null) &#123;</span><br><span class="line">               return value</span><br><span class="line">           &#125;</span><br><span class="line">           param.queryRequest?.queryList!!.forEach &#123; item -&gt;</span><br><span class="line">               if (item.query_key == name) value = item.query_value?.get(0).toString()</span><br><span class="line">           &#125;</span><br><span class="line">           return value</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       /**</span><br><span class="line">        * @Description: 获取param中的参数,适用取所有</span><br><span class="line">        * @Param: name(和前端传输的字段名保持一致，key)</span><br><span class="line">        * @Return:</span><br><span class="line">        * @Author: CJ</span><br><span class="line">        * @Date: 2021/7/2 10:58</span><br><span class="line">        **/</span><br><span class="line">       fun getParamDataWithAny(param: PageRequest, name:String ):List&lt;Any&gt;? &#123;</span><br><span class="line">           var list: List&lt;Any&gt;? = null</span><br><span class="line">           param.queryRequest?.queryList!!.forEach &#123; item -&gt;</span><br><span class="line">               if (item.query_key == name) &#123;</span><br><span class="line">                   list = item.query_value</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           return list</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       /**</span><br><span class="line">        * @Description: 删除param中的参数，适用于单个</span><br><span class="line">        * @Param: name(和前端传输的字段名保持一致，key)</span><br><span class="line">        * @Return:</span><br><span class="line">        * @Author: CJ</span><br><span class="line">        * @Date: 2021/7/2 11:04</span><br><span class="line">        **/</span><br><span class="line">       fun delParamDataWithOne(param: PageRequest,name:String) &#123;</span><br><span class="line">           if (param.queryRequest == null</span><br><span class="line">                   || param.queryRequest?.queryList == null || param.queryRequest!!.queryList.size == 0) &#123;</span><br><span class="line">               return</span><br><span class="line">           &#125;</span><br><span class="line">           val iterator: MutableIterator&lt;QueryArgs&gt; = param.queryRequest?.queryList!!.iterator() as MutableIterator&lt;QueryArgs&gt;</span><br><span class="line">           while (iterator.hasNext()) &#123;</span><br><span class="line">               val queryArgs: QueryArgs = iterator.next()</span><br><span class="line">               if (queryArgs.query_key == name)</span><br><span class="line">                   iterator.remove()</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       /**</span><br><span class="line">        * @Description: 删除param中的参数，适用于多个</span><br><span class="line">        * @Param: name(和前端传输的字段名保持一致，key)</span><br><span class="line">        * @Return:</span><br><span class="line">        * @Author: CJ</span><br><span class="line">        * @Date: 2021/7/2 11:04</span><br><span class="line">        **/</span><br><span class="line">       fun delParamDataWithAny(param: PageRequest,nameList:List&lt;String&gt;) &#123;</span><br><span class="line">           val iterator: MutableIterator&lt;QueryArgs&gt; = param.queryRequest?.queryList!!.iterator() as MutableIterator&lt;QueryArgs&gt;</span><br><span class="line">           nameList.forEach&#123;</span><br><span class="line">               while (iterator.hasNext()) &#123;</span><br><span class="line">                   val queryArgs: QueryArgs = iterator.next()</span><br><span class="line">                   if (queryArgs.query_key == it)</span><br><span class="line">                       iterator.remove()</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       /**</span><br><span class="line">        * 替换查询参数的名称,适用于多个表不同参数名的情况</span><br><span class="line">        */</span><br><span class="line">       fun replaceParamDataWithQueryKey(param: PageRequest, oldName:String, newName:String ): Boolean &#123;</span><br><span class="line">          if(param.queryRequest == null ) &#123;</span><br><span class="line">            return false</span><br><span class="line">           &#125;</span><br><span class="line">           param.queryRequest?.queryList!!.forEach &#123; item -&gt;</span><br><span class="line">               if (oldName.equals(item.query_key)) &#123;</span><br><span class="line">                   item.query_key = newName</span><br><span class="line">                   return true</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           return false</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">       /**</span><br><span class="line">        * map的key,下划线转驼峰</span><br><span class="line">        */</span><br><span class="line">       fun mapToCamelKey (oldList: List&lt;JavaMap&gt;): MutableList&lt;JavaMap&gt; &#123;</span><br><span class="line">           val list = mutableListOf&lt;JavaMap&gt;()</span><br><span class="line">           oldList.forEach&#123;</span><br><span class="line">               val javaMap = mutableMapOf&lt;Any?, Any?&gt;()</span><br><span class="line">               it.forEach&#123;</span><br><span class="line">                   javaMap.put(StrUtil.toCamelCase(it.key.toString()), it.value)</span><br><span class="line">               &#125;</span><br><span class="line">               list.add(javaMap)</span><br><span class="line">           &#125;</span><br><span class="line">           return list</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<h3 id="URL-编解码工具"><a href="#URL-编解码工具" class="headerlink" title="URL 编解码工具"></a>URL 编解码工具</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// URL编解码工具</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">URLComponent</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;多线程&quot;</span>;</span><br><span class="line">        String str;</span><br><span class="line">        <span class="comment">// 编码</span></span><br><span class="line">        str = URLEncoder.encode(input, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 解码</span></span><br><span class="line">        str = URLDecoder.decode(input, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Date-型日期处理"><a href="#Date-型日期处理" class="headerlink" title="Date 型日期处理"></a>Date 型日期处理</h3><h4 id="Date-型日期比较大小"><a href="#Date-型日期比较大小" class="headerlink" title="Date 型日期比较大小"></a>Date 型日期比较大小</h4><p>compareTo(Date date)</p>
<p>date 实现了 Comparable 接口 调用 compareTo(Date date)方法可以比较大小。</p>
<p>int res &#x3D; date1.compareTo(date2)，相等则返回 0，date1 大返回 1，否则返回-1。</p>
<p>getTime()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">Date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(date1);</span><br><span class="line"><span class="type">var</span> <span class="variable">Date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(date2);</span><br><span class="line"><span class="type">int</span> res=Date1.getTime() &gt; Date2.getTime()</span><br></pre></td></tr></table></figure>

<p>直接用 Date 自带方法 before()和 after()比较</p>
<p>SimpleDateFormat df &#x3D; new SimpleDateFormat(“yyyy-MM-dd HH:mm:ss”);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">   Date d1=df.parse(beginTime);</span><br><span class="line">   Date d2=df.parse(endTime);</span><br><span class="line"></span><br><span class="line">   System.out.println(d1.before(d2));</span><br><span class="line">   System.out.println(d1.after(d2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  <span class="comment">// 2022-06-08T14:19:10+08:00</span></span><br><span class="line">  <span class="type">String</span> <span class="variable">createTime</span> <span class="operator">=</span> <span class="string">&quot;2022-06-08T14:19:10+08:00&quot;</span>;</span><br><span class="line">  SimpleDateFormat sdf=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">  SimpleDateFormat sdft=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm:ssXXX&quot;</span>);</span><br><span class="line">  Date date=sdft.parse(createTime);</span><br><span class="line">  String time=sdf.format(date);</span><br><span class="line">  System.out.println(time);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Scheduled-定时器"><a href="#Scheduled-定时器" class="headerlink" title="@Scheduled 定时器"></a>@Scheduled 定时器</h2><p>主程序上增加 <code>@EnableScheduling</code> 开启定时任务功能</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SessionSchedual</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> sysUserSessionMapper: SysUserSessionMapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span>  logger = LogFactory.getLog(<span class="keyword">this</span>::<span class="keyword">class</span>.java)</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 一分钟一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 1000 * 60 )</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">cycleDelToken</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">val</span> num = sysUserSessionMapper.queryTimeoutToken()</span><br><span class="line">        logger.info(<span class="string">&quot;处理掉<span class="subst">$&#123;num&#125;</span>条无效token&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//秒   分   时     日   月   周几</span></span><br><span class="line">   <span class="comment">//0 * * * * MON-FRI</span></span><br><span class="line">   <span class="comment">//注意cron表达式的用法；</span></span><br><span class="line">   <span class="meta">@Scheduled(cron = &quot;0 * * * * 0-7&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;hello.....&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Cron-表达式"><a href="#Cron-表达式" class="headerlink" title="Cron 表达式"></a>Cron 表达式</h3><p><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/64769.html">https://help.aliyun.com/document_detail/64769.html</a></p>
<p>Spring 为我们提供了异步执行任务调度的方式，提供了两个接口。</p>
<ul>
<li>TaskExecutor 接口</li>
<li>TaskScheduler 接口</li>
</ul>
<h4 id="Cron-表达式生成器"><a href="#Cron-表达式生成器" class="headerlink" title="Cron 表达式生成器"></a>Cron 表达式生成器</h4><p><a target="_blank" rel="noopener" href="https://www.bejson.com/othertools/cron/">https://www.bejson.com/othertools/cron/</a></p>
<h4 id="常用的表达式"><a href="#常用的表达式" class="headerlink" title="常用的表达式"></a>常用的表达式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">（1）0/2 * * * * ?   表示每2秒 执行任务</span><br><span class="line">（1）0 0/2 * * * ?   表示每2分钟 执行任务</span><br><span class="line">（1）0 0 2 1 * ?   表示在每月的1日的凌晨2点调整任务</span><br><span class="line">（2）0 15 10 ? * MON-FRI   表示周一到周五每天上午10:15执行作业</span><br><span class="line">（3）0 15 10 ? 6L 2002-2006   表示2002-2006年的每个月的最后一个星期五上午10:15执行作</span><br><span class="line">（4）0 0 10,14,16 * * ?   每天上午10点，下午2点，4点</span><br><span class="line">（5）0 0/30 9-17 * * ?   朝九晚五工作时间内每半小时</span><br><span class="line">（6）0 0 12 ? * WED   表示每个星期三中午12点</span><br><span class="line">（7）0 0 12 * * ?   每天中午12点触发</span><br><span class="line">（8）0 15 10 ? * *   每天上午10:15触发</span><br><span class="line">（9）0 15 10 * * ?     每天上午10:15触发</span><br><span class="line">（10）0 15 10 * * ?   每天上午10:15触发</span><br><span class="line">（11）0 15 10 * * ? 2005   2005年的每天上午10:15触发</span><br><span class="line">（12）0 * 14 * * ?     在每天下午2点到下午2:59期间的每1分钟触发</span><br><span class="line">（13）0 0/5 14 * * ?   在每天下午2点到下午2:55期间的每5分钟触发</span><br><span class="line">（14）0 0/5 14,18 * * ?     在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发</span><br><span class="line">（15）0 0-5 14 * * ?   在每天下午2点到下午2:05期间的每1分钟触发</span><br><span class="line">（16）0 10,44 14 ? 3 WED   每年三月的星期三的下午2:10和2:44触发</span><br><span class="line">（17）0 15 10 ? * MON-FRI   周一至周五的上午10:15触发</span><br><span class="line">（18）0 15 10 15 * ?   每月15日上午10:15触发</span><br><span class="line">（19）0 15 10 L * ?   每月最后一日的上午10:15触发</span><br><span class="line">（20）0 15 10 ? * 6L   每月的最后一个星期五上午10:15触发</span><br><span class="line">（21）0 15 10 ? * 6L 2002-2005   2002年至2005年的每月的最后一个星期五上午10:15触发</span><br><span class="line">（22）0 15 10 ? * 6#3   每月的第三个星期五上午10:15触发</span><br></pre></td></tr></table></figure>

<h3 id="fixedRate"><a href="#fixedRate" class="headerlink" title="fixedRate"></a>fixedRate</h3><p>从第一次<strong>开始执行</strong>算起, 1000 * 60 * 60ms 后执行第二次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scheduled(fixedRate=1000 * 60 *60 )</span> </span><br></pre></td></tr></table></figure>

<h3 id="fixedDelay"><a href="#fixedDelay" class="headerlink" title="fixedDelay"></a>fixedDelay</h3><p>从第一次<strong>执行完</strong>算起, 1000 * 60 * 60ms 后执行第二次;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scheduled(fixedDelay =1000 * 60 *60 )</span> </span><br></pre></td></tr></table></figure>

<h3 id="initialDelay"><a href="#initialDelay" class="headerlink" title="initialDelay"></a>initialDelay</h3><p>项目启动后不马上执行定时器，根据 initialDelay 的值延时执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在容器启动后,延迟10秒后再执行一次定时器,以后每15秒再执行一次该定时器</span></span><br><span class="line"><span class="meta">@Scheduled(initialDelay = 1000 * 10,fixedRate = 1000 * 15)</span></span><br></pre></td></tr></table></figure>

<h2 id="comparator-和-comparable-1"><a href="#comparator-和-comparable-1" class="headerlink" title="comparator 和 comparable"></a>comparator 和 comparable</h2><p>comparable 接口实际上是出自 java.lang 包 它有一个 compareTo(Object obj)方法用来排序<br>comparator 接口实际上是出自 java.util 包它有一个 compare(Object obj1, Object obj2)方法用来排序</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_71087031/article/details/124850080">Comparator 和 Comparable 的区别</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       User user1=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;dingli&quot;</span>,<span class="number">25</span>,<span class="literal">true</span>);</span><br><span class="line">       User user2=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;huxiaojuan&quot;</span>,<span class="number">24</span>,<span class="literal">false</span>);</span><br><span class="line">       User user3=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xxx&quot;</span>,<span class="number">24</span>,<span class="literal">false</span>);</span><br><span class="line">       List&lt;User&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">       list.add(user1);</span><br><span class="line">       list.add(user2);</span><br><span class="line">       list.add(user3);</span><br><span class="line">       Collections.sort(list, <span class="keyword">new</span> <span class="title class_">User</span>()); <span class="comment">//类实现了的Comparator能满足需求</span></span><br><span class="line">       System.out.println(<span class="string">&quot;类自身实现Comparator:&quot;</span>+list);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//现在我想要按照名字升序，显然类中实现的不能满足要求，于是可以在类外自己实现想要的比较器</span></span><br><span class="line">       Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;User&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(User o1, User o2)</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> o1.getName().compareTo(o2.getName()); <span class="comment">//按照名字升序</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       System.out.println(<span class="string">&quot;匿名内部类方式：&quot;</span>+list);</span><br><span class="line">       <span class="comment">//由于Comparator接口是一个函数式接口，因此根据jdk1.8新特性，我们可以采用Lambda表达式简化代码</span></span><br><span class="line">       Collections.sort(list,(u1,u2)-&gt;&#123;<span class="keyword">return</span> u1.getName().compareTo(u2.getName());&#125;);</span><br><span class="line">       System.out.println(<span class="string">&quot;Lambda表达式方式：&quot;</span>+list);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>对于 Comparator 而言，o2 是 List 排序前，两两之间的前一个数，o1 是后一个数；<br>而 compareTo，比如“o1.compareTo(o2)”，相当于 o1&gt;o2 的判断，true 时返回 1；<br>而 sort 在接收到 1，或者 0（1 会更稳定）时都不会改变顺序，只有-1 或者其他负数才会。</p>
<p>简单来说，降序我们使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o2.getIntValue(&quot;weights&quot;).compareTo(o1.getIntValue(&quot;weights&quot;))</span><br></pre></td></tr></table></figure>

<p>升序我们使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o1.getIntValue(&quot;distancenum&quot;).compareTo(o2.getIntValue(&quot;distancenum&quot;))</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Saintmm/article/details/125218362">Java 自定义 Comparator 实现复杂排序（什么情况返回-1？返回 0？返回 1？）</a></p>
<h3 id="comparator-比较器-1"><a href="#comparator-比较器-1" class="headerlink" title="comparator 比较器"></a>comparator 比较器</h3><p>推荐使用</p>
<p>Collections.sort（） 对 ArrayList 排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建集合对象</span></span><br><span class="line">        ArrayList&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list1.add(<span class="number">10</span>);</span><br><span class="line">        list1.add(<span class="number">60</span>);</span><br><span class="line">        list1.add(<span class="number">20</span>);</span><br><span class="line">        list1.add(<span class="number">80</span>);</span><br><span class="line">        list1.add(<span class="number">30</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 60, 20, 80, 30]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 排序(默认排序，自然排序)</span></span><br><span class="line">        Collections.sort(list1);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 20, 30, 60, 80]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 升序排序！</span></span><br><span class="line">        Collections.sort(list1, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="comment">// 此方法是排序的核心</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后 升序！ 后-前 降序！(前后针对的是2个参数o)</span></span><br><span class="line">                <span class="keyword">return</span> o1-o2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[10, 20, 30, 60, 80]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 降序排序！</span></span><br><span class="line">        Collections.sort(list1, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="comment">// 此方法是排序的核心</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后 升序！ 后-前 降序！(前后针对的是2个参数o)</span></span><br><span class="line">                <span class="keyword">return</span> o2-o1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list1:&quot;</span> + list1); <span class="comment">// list1:[80, 60, 30, 20, 10]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test03</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建集合</span></span><br><span class="line">        ArrayList&lt;String&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list3.add(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;bbd&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;cbd&quot;</span>);</span><br><span class="line">        list3.add(<span class="string">&quot;bac&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bbd, cbd, bac]</span></span><br><span class="line">        <span class="comment">// 默认排序</span></span><br><span class="line">        Collections.sort(list2);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自己指定规则(升序！)</span></span><br><span class="line">        Collections.sort(list2, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 前-后：升序； 后-前：降序！</span></span><br><span class="line">                <span class="keyword">return</span> o1.charAt(<span class="number">0</span>)-o3.charAt(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 降序！</span></span><br><span class="line">        Collections.sort(list2, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">                <span class="comment">// 后-前：降序！</span></span><br><span class="line">                <span class="keyword">return</span> o3.charAt(<span class="number">0</span>)-o1.charAt(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;list2:&quot;</span>+list2); <span class="comment">// list2:[abc, bac, bbd, cbd]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TreeMap 指定比较器（默认是按 key 的升序排序）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TreeMap&lt;Person, String&gt; treeMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Person&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Person person1, Person person2)</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> person1.getAge() - person2.getAge();</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(num, <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">3</span>), <span class="string">&quot;person1&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">18</span>), <span class="string">&quot;person2&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">35</span>), <span class="string">&quot;person3&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">16</span>), <span class="string">&quot;person4&quot;</span>);</span><br><span class="line">        treeMap.entrySet().stream().forEach(personStringEntry -&gt; &#123;</span><br><span class="line">            System.out.println(personStringEntry.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="comparable-1"><a href="#comparable-1" class="headerlink" title="comparable"></a>comparable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// person对象没有实现Comparable接口，所以必须实现，这样才不会出错，才可以使treemap中的数据按顺序排列</span></span><br><span class="line"><span class="comment">// 前面一个例子的String类已经默认实现了Comparable接口，详细可以查看String类的API文档，另外其他</span></span><br><span class="line"><span class="comment">// 像Integer类等都已经实现了Comparable接口，所以不需要另外实现了</span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Person&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * T重写compareTo方法实现按年龄来排序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Person o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.age &gt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.age &lt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      TreeMap&lt;Person, String&gt; pdata = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;Person, String&gt;();</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">30</span>), <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">20</span>), <span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">10</span>), <span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">      pdata.put(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;小红&quot;</span>, <span class="number">5</span>), <span class="string">&quot;xiaohong&quot;</span>);</span><br><span class="line">      <span class="comment">// 得到key的值的同时得到key所对应的值</span></span><br><span class="line">      Set&lt;Person&gt; keys = pdata.keySet();</span><br><span class="line">      <span class="keyword">for</span> (Person key : keys) &#123;</span><br><span class="line">          System.out.println(key.getAge() + <span class="string">&quot;-&quot;</span> + key.getName());</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5-小红</span><br><span class="line">10-王五</span><br><span class="line">20-李四</span><br><span class="line">30-张三</span><br></pre></td></tr></table></figure>

<h3 id="Bug-清单-1"><a href="#Bug-清单-1" class="headerlink" title="Bug 清单"></a>Bug 清单</h3><p>可以这样记录一些有意义的 bug:</p>
<p>【日期】：***</p>
<p>【问题】：***</p>
<p>【原因】：***</p>
<p>【如何发现】：***</p>
<p>【如何修复】：***</p>
<p>【总结】：***</p>
<hr>
<p>【日期】：2023 年 4 月 12 日</p>
<p>【问题】：多数据源，指定了数据源 ppas21，手动写的线上库数据连接配置，明确了线上库有表，但是就是访问不到这个表，报错不存在。</p>
<p>【原因】：使用了 nacos 配置中心的，配置中心配置的 ppas21 是测试库的，而测试库是没有表的。</p>
<p>【如何发现】：排查了注解指定不成功，代码指定数据源，都不成功。检查了用户默认数据源没问题。突然想到了以前出现过 nacos 和 application 都配置了同名数据源的情况，遂去检查 nacos 的配置，发现了配置的是测试的库。</p>
<p>【如何修复】：注释掉 nacos 的测试库，在本地配置中增加线上数据源。</p>
<p>【总结】：配置的加载顺序是，bootstrap-dev.properties → application-dev.properties，检查配置先去配置中心看看，或许自己没有加但是别人加了数据源，然后在排查本地数据源的问题。主要还是有段时间没有动数据源了，生疏了，不敢确定，只能尝试，遂浪费了太多时间。</p>
<h2 id="排序算法-1"><a href="#排序算法-1" class="headerlink" title="排序算法"></a>排序算法</h2><p>动画图解：九大经典排序算法<br><a target="_blank" rel="noopener" href="https://www.v2ex.com/t/938103#reply1">https://www.v2ex.com/t/938103#reply1</a></p>
<p>用 HTML5 实现的各种排序算法的动画比较 <a target="_blank" rel="noopener" href="https://www.webhek.com/post/comparison-sort/">https://www.webhek.com/post/comparison-sort/</a></p>
<h1 id="23-种设计模式"><a href="#23-种设计模式" class="headerlink" title="23 种设计模式"></a>23 种设计模式</h1><h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><h3 id="饿汉单例设计模式"><a href="#饿汉单例设计模式" class="headerlink" title="饿汉单例设计模式"></a>饿汉单例设计模式</h3><p>饿汉单例设计模式就是使用类的时候已经将对象创建完毕，不管以后会不会使用到该实例化对象，先创建了再说。</p>
<p>看似很着急的样子，故被称为“饿汉模式”。</p>
<blockquote>
<p>实现步骤：</p>
<ol>
<li>将构造方法私有化，使其不能在类的外部通过 new 关键字实例化该类对象。</li>
<li>在该类内部产生一个唯一的实例化对象，并且将其封装为 private static 类型的成员变量。</li>
<li>定义一个静态方法返回这个唯一对象。</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 单例对象之饿汉式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 定义一个静态方法返回这个唯一对象。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 测试单例模式之饿汉式</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s1</span> <span class="operator">=</span> Singleton.getInstance();</span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s2</span> <span class="operator">=</span> Singleton.getInstance();</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：打印的地址值一致</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><p>调用时间快</p>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><p>占用空间高</p>
<h3 id="懒汉单例设计模式"><a href="#懒汉单例设计模式" class="headerlink" title="懒汉单例设计模式"></a>懒汉单例设计模式</h3><p>懒汉单例设计模式就是调用 getInstance()方法时实例才被创建，先不急着实例化出对象，等要用的时候才实例化出对象。</p>
<p>看似不着急，故称为“懒汉模式”。</p>
<blockquote>
<p>实现步骤：</p>
<ol>
<li>将构造方法私有化，使其不能在类的外部通过 new 关键字实例化该类对象。</li>
<li>在该类内部产生一个唯一的实例化对象，并且将其封装为 private static 类型的成员变量。</li>
<li>定义一个静态方法返回这个唯一对象。要用的时候才实例化出对象</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 单例模式之懒汉式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton2</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton2 singleton;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 定义一个静态方法返回这个唯一对象。要用的时候才实例化出对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> Singleton2 <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> <span class="title class_">Singleton2</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 测试单例模式之懒汉式</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Singleton2</span> <span class="variable">s1</span> <span class="operator">=</span> Singleton2.getInstance();</span><br><span class="line">        <span class="type">Singleton2</span> <span class="variable">s2</span> <span class="operator">=</span> Singleton2.getInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;注意：懒汉单例设计模式在多线程环境下可能会实例化出多个对象，不能保证单例的状态，所以加上关键字：synchronized，保证其同步安全。&#x3D;&#x3D;</p>
<h5 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h5><p>空间占用低<br>（现代内存价格不高，因此多使用饿汉式）</p>
<h5 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h5><p>第一次调用慢</p>
<h3 id="知识小结"><a href="#知识小结" class="headerlink" title="知识小结"></a>知识小结</h3><p>单例模式可以保证系统中<code>一个类只有一个对象实例</code>。</p>
<p>实现单例模式的步骤：</p>
<ol>
<li><p>将构造方法私有化，使其不能在类的外部通过 new 关键字实例化该类对象。</p>
</li>
<li><p>在该类内部产生一个唯一的实例化对象，并且将其封装为 private static 类型的成员变量。</p>
</li>
<li><p>定义一个静态方法返回这个唯一对象。</p>
<ol>
<li>饿汉式：类加载时创建</li>
<li>懒汉式：第一次使用时创建</li>
</ol>
</li>
</ol>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><p><a target="_blank" rel="noopener" href="https://www.runoob.com/design-pattern/strategy-pattern.html">策略模式 | 菜鸟教程 (runoob.com)</a></p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 交通工具</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Transportation</span> &#123;</span><br><span class="line"> <span class="comment">// 乘坐: 姓名name, 人数num</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span> <span class="params">(String name, <span class="type">int</span> num)</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现类"><a href="#实现类" class="headerlink" title="实现类"></a>实现类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.Transportation;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 骑自行车</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bike</span> <span class="keyword">implements</span> <span class="title class_">Transportation</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span><span class="params">(String name, <span class="type">int</span> num)</span> &#123;</span><br><span class="line"> System.out.println(String.format(<span class="string">&quot;%s骑自行车,他们%s人!&quot;</span>, name, num));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.Transportation;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 坐bus</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bus</span> <span class="keyword">implements</span> <span class="title class_">Transportation</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span><span class="params">(String name, <span class="type">int</span> num)</span> &#123;</span><br><span class="line"> System.out.println(String.format(<span class="string">&quot;%s乘坐Bus,他们%s人!&quot;</span>, name, num));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.Transportation;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开车</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Transportation</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span><span class="params">(String name, <span class="type">int</span> num)</span> &#123;</span><br><span class="line"> System.out.println(String.format(<span class="string">&quot;%s自己开车,他们%s人!&quot;</span>, name, num));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 人</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"> Transportation transportation;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">People</span><span class="params">(Transportation transportation)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.transportation = transportation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">travel</span><span class="params">(String name ,<span class="type">int</span> num)</span> &#123;</span><br><span class="line">      transportation.ride(name, num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="main"><a href="#main" class="headerlink" title="main"></a>main</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.impl.Bike;</span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.impl.Bus;</span><br><span class="line"><span class="keyword">import</span> com.cj.strategy.impl.Car;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>(<span class="keyword">new</span> <span class="title class_">Bus</span>());</span><br><span class="line">      people.travel(<span class="string">&quot;小王&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">People</span>(<span class="keyword">new</span> <span class="title class_">Bike</span>()).travel(<span class="string">&quot;小孙&quot;</span>, <span class="number">2</span>);</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">People</span>(<span class="keyword">new</span> <span class="title class_">Car</span>()).travel(<span class="string">&quot;小张&quot;</span>, <span class="number">3</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><p>工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。这种类型的设计模式属于创建型模式</p>
<p>它提供了一种创建对象的最佳方式。之前我们创建类对象时, 都是使用 <code>new</code>对象的形式创建, 除 new 对象方式以外, 工厂模式也可以创建对象</p>
<h3 id="快速入门（简化对象创建）"><a href="#快速入门（简化对象创建）" class="headerlink" title="快速入门（简化对象创建）"></a>快速入门（简化对象创建）</h3><h5 id="Car-接口"><a href="#Car-接口" class="headerlink" title="Car 接口"></a>Car 接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 汽车规范</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="二个实现"><a href="#二个实现" class="headerlink" title="二个实现"></a>二个实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Falali</span> <span class="keyword">implements</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;5.0排量，百公里加速5秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Qirui</span> <span class="keyword">implements</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.0排量，百公里加速13秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="Car-工厂"><a href="#Car-工厂" class="headerlink" title="Car 工厂"></a>Car 工厂</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 生产汽车工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title function_">createCar</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;qirui&quot;</span>.equals(id)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Qirui</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;falali&quot;</span>.equals(id)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Falali</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> CarFactory.createCar(<span class="string">&quot;qirui&quot;</span>);</span><br><span class="line">        car.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bean-工厂"><a href="#bean-工厂" class="headerlink" title="bean 工厂"></a>bean 工厂</h3><h4 id="与-xml-配合使用（解耦）"><a href="#与-xml-配合使用（解耦）" class="headerlink" title="与 xml 配合使用（解耦）"></a>与 xml 配合使用（解耦）</h4><h5 id="导入-jar-包"><a href="#导入-jar-包" class="headerlink" title="导入 jar 包"></a>导入 jar 包</h5><p><img src="https://s3.uuu.ovh/imgs/2022/11/22/693c38457ccc70fb.png"></p>
<h5 id="xml-配置"><a href="#xml-配置" class="headerlink" title="xml 配置"></a>xml 配置</h5><p><img src="https://s3.uuu.ovh/imgs/2022/11/22/44aa1e406c690a3d.png"></p>
<h4 id="Bean-工厂"><a href="#Bean-工厂" class="headerlink" title="Bean 工厂"></a>Bean 工厂</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 生产对象工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  获取指定id类型对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getBean</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//  1.解析指定xml的文件，获得document</span></span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>().read(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;D:\\devcode\\workspace\\web-163\\day00-enhance\\src\\beans.xml&quot;</span>));</span><br><span class="line">            <span class="comment">//  2.指定xpath表达式，获取指定id的&lt;bean&gt;</span></span><br><span class="line">            <span class="comment">// String xpath = &quot;//bean[@id=&#x27;car&#x27;]&quot;;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">xpath</span> <span class="operator">=</span> <span class="string">&quot;//bean[@id=&#x27;&quot;</span> + id + <span class="string">&quot;&#x27;]&quot;</span>;</span><br><span class="line">            <span class="type">Element</span> <span class="variable">element</span> <span class="operator">=</span> (Element) document.selectSingleNode(xpath); <span class="comment">//  &lt;bean id=&quot;car&quot; class=&quot;com.itheima.e_factory.Qirui&quot;&gt;&lt;/bean&gt;</span></span><br><span class="line">            <span class="comment">//  3.获取class属性中全限定类名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> element.attributeValue(<span class="string">&quot;class&quot;</span>); <span class="comment">// com.itheima.e_factory.Qirui</span></span><br><span class="line">            <span class="comment">//  4.通过反射获取字节码对象</span></span><br><span class="line">            Class&lt;?&gt; clazz = Class.forName(className);</span><br><span class="line">            <span class="comment">//  5.创建该对象实例并返回</span></span><br><span class="line">            <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Car car = CarFactory.createCar(&quot;qirui&quot;);</span></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car) BeanFactory.getBean(<span class="string">&quot;car&quot;</span>);</span><br><span class="line">        car.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="知识小结-1"><a href="#知识小结-1" class="headerlink" title="知识小结"></a>知识小结</h3><ul>
<li>为了<code>解耦</code>，把对象的创建和使用的过程分开。就是 Class A 想调用 Class B ，那么 A 只是调用 B 的方法，而至于 B 的实例化，就交给工厂类。</li>
<li>可以<code>降低代码重复</code>，如果创建对象 B 的过程都很复杂，需要一定的代码量，而且很多地方都要用到，那么就会有很多的重复代码。我们可以这些创建对象 B 的代码放到工厂里统一管理。</li>
<li>工厂管理了对象的创建逻辑，使用者并不需要知道具体的创建过程，只管使用即可，减少了使用者因为创建逻辑导致的错误。</li>
</ul>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>正则表达式，又称规则表达式,（Regular Expression，在代码中常简写为 regex、regexp 或 RE）</p>
<p><a target="_blank" rel="noopener" href="https://imageslr.github.io/regexone-cn/">RegexOne 中文</a> <a target="_blank" rel="noopener" href="https://regexlearn.com/zh-cn/cheatsheet">RegexLearn</a><br><a target="_blank" rel="noopener" href="https://deerchao.cn/tools/wegester/">正则表达式( Regular Expression) 测试</a></p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/\[.+?\]\g  // 取 [] 及里边的内容</span><br></pre></td></tr></table></figure>

<h3 id="正则表达式介绍"><a href="#正则表达式介绍" class="headerlink" title="正则表达式介绍"></a>正则表达式介绍</h3><p>在 Java 中，我们经常需要验证一些字符串，例如：年龄必须是 2 位的数字、用户名必须是 8 位长度而且只能包含大小写字母、数字等。正则表达式就是用来<code>验证各种字符串的规则</code>。它内部描述了一些规则，我们可以验证用户输入的字符串是否匹配这个规则。</p>
<h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><p><a target="_blank" rel="noopener" href="https://regexr.com/">RegExr：学习，构建和测试正则表达式</a></p>
<p>先看一个不使用正则表达式验证的例子：下面的程序让用户输入一个 QQ 号码，我们要验证：</p>
<ul>
<li>QQ 号码必须大于 5 位长度</li>
<li>而且必须全部是数字</li>
<li>而且首位不能为 0</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// 下面的程序让用户输入一个QQ号码，我们要验证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">qq</span> <span class="operator">=</span> <span class="string">&quot;22123&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        System.out.println(<span class="string">&quot;1.&quot;</span> + checkQQ1(qq));</span><br><span class="line">        System.out.println(<span class="string">&quot;2.&quot;</span> + checkQQ2(qq));</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// 传统方式验证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title function_">checkQQ1</span><span class="params">(String qq)</span> &#123;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// - QQ号码必须大于5位长度</span></span><br><span class="line">        <span class="keyword">if</span> (qq.length() &lt; <span class="number">5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// - 而且必须全部是数字</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; qq.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> qq.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (c &lt; <span class="string">&#x27;0&#x27;</span> || c &gt; <span class="string">&#x27;9&#x27;</span>) &#123; <span class="comment">// c字符不在 0-9 之间，就返回false</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// - 而且首位不能为0</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> qq.charAt(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// 正则表达式验证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title function_">checkQQ2</span><span class="params">(String qq)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;[1-9]\\d&#123;4,&#125;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> qq.matches(regex); <span class="comment">// qq字符串的内容符合规则返回true，不符合返回false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式-普通字符"><a href="#正则表达式-普通字符" class="headerlink" title="正则表达式-普通字符"></a>正则表达式-普通字符</h3><blockquote>
<p>语法示例：</p>
<ol>
<li>[abc]：代表 a 或者 b，或者 c 字符中的一个。</li>
<li>[^abc]：代表除 a,b,c 以外的任何字符。</li>
<li>[a-z]：代表 a-z 的所有小写字符中的一个。</li>
<li>[A-Z]：代表 A-Z 的所有大写字符中的一个。</li>
<li>[0-9]：代表 0-9 之间的某一个数字字符。</li>
<li>[a-zA-Z0-9]：代表 a-z 或者 A-Z 或者 0-9 之间的任意一个字符。</li>
<li>[a-dm-p]：a 到 d 或 m 到 p 之间的任意一个字符。</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Eat&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 1.验证str内容必须是eat</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;eat&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 2.验证str是否以e开头，以t结尾，中间是a,e,i,o,u中某个字符</span></span><br><span class="line">        regex=<span class="string">&quot;e[aeiou]t&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;2.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 3.验证str是否以e开头，以t结尾，中间不是a,e,i,o,u中某个字符</span></span><br><span class="line">        regex=<span class="string">&quot;e[^aeiou]t&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;3.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 4.验证str是否a-z的任何一个小写字符开头，后跟at</span></span><br><span class="line">        regex = <span class="string">&quot;[a-zA-Z]at&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;4.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 5.验证str是否以a-d或者m-p之间某个字符开头，后跟at</span></span><br><span class="line">        regex = <span class="string">&quot;[a-dm-p]at&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;5.&quot;</span>+str.matches(regex));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式-逻辑运算符"><a href="#正则表达式-逻辑运算符" class="headerlink" title="正则表达式-逻辑运算符"></a>正则表达式-逻辑运算符</h3><blockquote>
<p>语法示例：</p>
<ol>
<li>&amp;&amp;：并且（与）</li>
<li>| ：或者</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;2at&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 1.验证str是否以a-d或者m-p之间某个字符开头，后跟at （了解）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;[a-d | m-p]at&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.&quot;</span> + str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 2.要求字符串是否是除a、e、i、o、u外的其它小写字母开头，后跟at</span></span><br><span class="line">         regex=<span class="string">&quot;[[^aeiou]&amp;&amp;[a-z]]at&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;2.&quot;</span> + str.matches(regex));</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式-预定义字符"><a href="#正则表达式-预定义字符" class="headerlink" title="正则表达式-预定义字符"></a>正则表达式-预定义字符</h3><blockquote>
<p>语法示例：</p>
<ol>
<li>“.” ： 匹配任何字符。</li>
<li>“\d”：任何数字[0-9]的简写；</li>
<li>“\D”：任何非数字[^0-9]的简写；</li>
<li>“\s”： 空白字符：[ \t\n\x0B\f\r] 的简写</li>
<li>“\S”： 非空白字符：[^\s] 的简写</li>
<li>“\w”：单词字符：[a-zA-Z_0-9]的简写</li>
<li>“\W”：非单词字符：[^\w]</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;w58&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 1.验证str是否3位数字</span></span><br><span class="line">        <span class="comment">// String regex = &quot;[0-9][0-9][0-9]&quot;;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\d\\d\\d&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.&quot;</span> + str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 2.验证手机号：1开头，第二位：3/5/8，剩下9位都是0-9的数字</span></span><br><span class="line">        str = <span class="string">&quot;13800138000&quot;</span>;</span><br><span class="line">        regex = <span class="string">&quot;1[358]\\d\\d\\d\\d\\d\\d\\d\\d\\d&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;2.&quot;</span> + str.matches(regex));</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 3.验证字符串是否以e开头，以t结尾，中间是任何字符</span></span><br><span class="line">        str = <span class="string">&quot;e=t&quot;</span>;</span><br><span class="line">        regex=<span class="string">&quot;e.t&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;3.&quot;</span> + str.matches(regex));</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 4.验证str是否是：eat.</span></span><br><span class="line">        str = <span class="string">&quot;eat.&quot;</span>;</span><br><span class="line">        regex=<span class="string">&quot;eat\\.&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;4.&quot;</span> + str.matches(regex));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式-数量词"><a href="#正则表达式-数量词" class="headerlink" title="正则表达式-数量词"></a>正则表达式-数量词</h3><blockquote>
<p>语法示例：</p>
<ol>
<li>X? : 0 次或 1 次</li>
<li>X* : 0 次到多次</li>
<li>X+ : 1 次或多次</li>
<li>X{n} : 恰好 n 次</li>
<li>X{n,} : 至少 n 次</li>
<li>X{n,m}: n 到 m 次(n 和 m 都是包含的)</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo10</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;1213&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 1.验证str是否3位数字</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\d&#123;3&#125;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 2.验证str是否是多位数字</span></span><br><span class="line">        regex=<span class="string">&quot;\\d*&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;2.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 3.验证手机号：1开头，第二位：3/5/8，剩下9位都是0-9的数字</span></span><br><span class="line">        str = <span class="string">&quot;13800138000&quot;</span>;</span><br><span class="line">        regex = <span class="string">&quot;1[358]\\d&#123;9&#125;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;3.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 4.验证小数:必须出现小数点，但是只能出现1次</span></span><br><span class="line">        str = <span class="string">&quot;3.1415926&quot;</span>;</span><br><span class="line">        regex=<span class="string">&quot;\\d+\\.&#123;1&#125;\\d+&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;4.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 5.验证小数：小数点可以不出现，也可以出现1次</span></span><br><span class="line">        str = <span class="string">&quot;3.&quot;</span>;</span><br><span class="line">        regex=<span class="string">&quot;\\d+\\.?\\d*&quot;</span>;  <span class="comment">//??有问题</span></span><br><span class="line">        System.out.println(<span class="string">&quot;5.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 6.验证小数：要求匹配：3、3.、3.14、+3.14、-3.</span></span><br><span class="line">        str = <span class="string">&quot;-3.&quot;</span>;</span><br><span class="line">        regex=<span class="string">&quot;[+-]?\\d+\\.?\\d*&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;6.&quot;</span>+str.matches(regex));</span><br><span class="line">​</span><br><span class="line">        <span class="comment">// 7.验证qq号码   5位~11位之间</span></span><br><span class="line">        regex = <span class="string">&quot;[1-9]\\d&#123;4,10&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式-分组括号"><a href="#正则表达式-分组括号" class="headerlink" title="正则表达式-分组括号"></a>正则表达式-分组括号</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo11</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;AG8FV-B9TKY-FRT9J-99899-XPQ4G&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        <span class="comment">//验证这个序列号：分为5组，每组之间使用-隔开，每组由5位A-Z或者0-9的字符组成</span></span><br><span class="line">        <span class="comment">// String regex = &quot;[A-Z0-9]&#123;5&#125;-[A-Z0-9]&#123;5&#125;-[A-Z0-9]&#123;5&#125;-[A-Z0-9]&#123;5&#125;-[A-Z0-9]&#123;5&#125;&quot;;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;([A-Z0-9]&#123;5&#125;-)&#123;4&#125;([A-Z0-9]&#123;5&#125;)&quot;</span>;</span><br><span class="line">        System.out.println(str.matches(regex));</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="不同地方的用法"><a href="#不同地方的用法" class="headerlink" title="不同地方的用法"></a>不同地方的用法</h2><h3 id="split-方法中使用正则表达式"><a href="#split-方法中使用正则表达式" class="headerlink" title="split 方法中使用正则表达式"></a>split 方法中使用正则表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo12</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;12---53----4------23&quot;</span>;</span><br><span class="line">​</span><br><span class="line">        String regex=<span class="string">&quot;-+&quot;</span>;</span><br><span class="line">        String[] strArray = str.split(regex);</span><br><span class="line">​</span><br><span class="line">        <span class="keyword">for</span> (String s : strArray) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="replaceAll-方法中使用正则表达式"><a href="#replaceAll-方法中使用正则表达式" class="headerlink" title="replaceAll 方法中使用正则表达式"></a>replaceAll 方法中使用正则表达式</h3><p>注意 replace 只会匹配符号，不支持正则</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo13</span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">//  replaceAll 替换方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;jfdk432jfdk2jk24354j47jk5l31324&quot;</span>;</span><br><span class="line">        String regex=<span class="string">&quot;\\d+&quot;</span>;</span><br><span class="line">        System.out.println(str.replaceAll(regex, <span class="string">&quot;&quot;</span>));</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JS-中运用正则表达式"><a href="#JS-中运用正则表达式" class="headerlink" title="JS 中运用正则表达式"></a>JS 中运用正则表达式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(!new RegExp(&quot;^[0-9]*$&quot;).test(123))&#123; &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!reg.test(obj.value)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(&quot;12&quot;.match(new RegExp(&quot;^12.*$&quot;))) &#123;</span><br><span class="line">console.log(true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JAVA-中使用正则表达式"><a href="#JAVA-中使用正则表达式" class="headerlink" title="JAVA 中使用正则表达式"></a>JAVA 中使用正则表达式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// content 包含，则返回true</span><br><span class="line">Pattern.matches(pattern, content)</span><br></pre></td></tr></table></figure>

<h3 id="验证数字的正则表达式集"><a href="#验证数字的正则表达式集" class="headerlink" title="验证数字的正则表达式集"></a>验证数字的正则表达式集</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">验证数字：^[0-9]*$ </span><br><span class="line">验证n位的数字：^\d&#123;n&#125;$ </span><br><span class="line">验证至少n位数字：^\d&#123;n,&#125;$ </span><br><span class="line">验证m-n位的数字：^\d&#123;m,n&#125;$ </span><br><span class="line">验证零和非零开头的数字：^(0|[1-9][0-9]*)$ </span><br><span class="line">验证有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$ </span><br><span class="line">验证有1-3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$ </span><br><span class="line">验证非零的正整数：^\+?[1-9][0-9]*$ </span><br><span class="line">验证非零的负整数：^\-[1-9][0-9]*$ </span><br><span class="line">验证非负整数（正整数 + 0） ^\d+$ </span><br><span class="line">验证非正整数（负整数 + 0） ^((-\d+)|(0+))$ </span><br><span class="line">验证长度为3的字符：^.&#123;3&#125;$ </span><br><span class="line">验证由26个英文字母组成的字符串：^[A-Za-z]+$ </span><br><span class="line">验证由26个大写英文字母组成的字符串：^[A-Z]+$ </span><br><span class="line">验证由26个小写英文字母组成的字符串：^[a-z]+$ </span><br><span class="line">验证由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$ </span><br><span class="line">验证由数字、26个英文字母或者下划线组成的字符串：^\w+$ </span><br><span class="line">验证用户密码:^[a-zA-Z]\w&#123;5,17&#125;$ 正确格式为：以字母开头，长度在6-18之间，只能包含字符、数字和下划线。 </span><br><span class="line">验证是否含有 ^%&amp;&#x27;,;=?$\&quot; 等字符：[^%&amp;&#x27;,;=?$\x22]+ </span><br><span class="line">验证汉字：^[\u4e00-\u9fa5],&#123;0,&#125;$ </span><br><span class="line">验证Email地址：^\w+[-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$ </span><br><span class="line">验证InternetURL：^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$ ；^[a-zA-z]+://(w+(-w+)*)(.(w+(-w+)*))*(?S*)?$ </span><br><span class="line">验证电话号码：^(|\d&#123;3,4&#125;-)?\d&#123;7,8&#125;$：--正确格式为：XXXX-XXXXXXX，XXXX-XXXXXXXX，XXX-XXXXXXX，XXX-XXXXXXXX，XXXXXXX，XXXXXXXX。 </span><br><span class="line">验证身份证号（15位或18位数字）：^\d&#123;15&#125;|\d&#123;&#125;18$ </span><br><span class="line">验证一年的12个月：^(0?[1-9]|1[0-2])$ 正确格式为：“01”-“09”和“1”“12” </span><br><span class="line">验证一个月的31天：^((0?[1-9])|((1|2)[0-9])|30|31)$ 正确格式为：01、09和1、31。 </span><br><span class="line">整数：^-?\d+$ </span><br><span class="line">非负浮点数（正浮点数 + 0）：^\d+(\.\d+)?$ </span><br><span class="line">正浮点数 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$ </span><br><span class="line">非正浮点数（负浮点数 + 0） ^((-\d+(\.\d+)?)|(0+(\.0+)?))$ </span><br><span class="line">负浮点数 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$ </span><br><span class="line">浮点数 ^(-?\d+)(\.\d+)?$</span><br></pre></td></tr></table></figure>

<h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><h2 id="为什么需要泛型？"><a href="#为什么需要泛型？" class="headerlink" title="为什么需要泛型？"></a>为什么需要泛型？</h2><ol>
<li><strong>适用于多种数据类型执行相同的代码</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private static int add(int a, int b) &#123;</span><br><span class="line">    System.out.println(a + &quot;+&quot; + b + &quot;=&quot; + (a + b));</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static float add(float a, float b) &#123;</span><br><span class="line">    System.out.println(a + &quot;+&quot; + b + &quot;=&quot; + (a + b));</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static double add(double a, double b) &#123;</span><br><span class="line">    System.out.println(a + &quot;+&quot; + b + &quot;=&quot; + (a + b));</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果没有泛型，要实现不同类型的加法，每种类型都需要重载一个 add 方法；通过泛型，我们可以复用为一个方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">private static &lt;T extends Number&gt; double add(T a, T b) &#123;</span><br><span class="line">    System.out.println(a + &quot;+&quot; + b + &quot;=&quot; + (a.doubleValue() + b.doubleValue()));</span><br><span class="line">    return a.doubleValue() + b.doubleValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>泛型中的类型在使用时指定，不需要强制类型转换</strong>（<strong>类型安全</strong>，编译器会<strong>检查类型</strong>）</li>
</ul>
<p>看下这个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List list = new ArrayList();</span><br><span class="line">list.add(&quot;xxString&quot;);</span><br><span class="line">list.add(100d);</span><br><span class="line">list.add(new Person());</span><br></pre></td></tr></table></figure>

<p>我们在使用上述 list 中，list 中的元素都是 Object 类型（无法约束其中的类型），所以在取出集合元素时需要人为的强制类型转化到具体的目标类型，且很容易出现<code>java.lang.ClassCastException</code>异常。</p>
<p>引入泛型，它将提供类型的约束，提供编译前的检查：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">// list中只能放String, 不能放其它类型的元素</span><br></pre></td></tr></table></figure>

<h2 id="泛型类如何定义使用？"><a href="#泛型类如何定义使用？" class="headerlink" title="泛型类如何定义使用？"></a>泛型类如何定义使用？</h2><ul>
<li>从一个简单的泛型类看起：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Point&lt;T&gt;&#123;         // 此处可以随便写标识符号，T是type的简称</span><br><span class="line">    private T var ;     // var的类型由T指定，即：由外部指定</span><br><span class="line">    public T getVar()&#123;  // 返回值的类型由外部决定</span><br><span class="line">        return var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setVar(T var)&#123;  // 设置的类型也由外部决定</span><br><span class="line">        this.var = var ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class GenericsDemo06&#123;</span><br><span class="line">    public static void main(String args[])&#123;</span><br><span class="line">        Point&lt;String&gt; p = new Point&lt;String&gt;() ;     // 里面的var类型为String类型</span><br><span class="line">        p.setVar(&quot;it&quot;) ;                            // 设置字符串</span><br><span class="line">        System.out.println(p.getVar().length()) ;   // 取得字符串的长度</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>多元泛型</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class Notepad&lt;K,V&gt;&#123;       // 此处指定了两个泛型类型</span><br><span class="line">    private K key ;     // 此变量的类型由外部决定</span><br><span class="line">    private V value ;   // 此变量的类型由外部决定</span><br><span class="line">    public K getKey()&#123;</span><br><span class="line">        return this.key ;</span><br><span class="line">    &#125;</span><br><span class="line">    public V getValue()&#123;</span><br><span class="line">        return this.value ;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setKey(K key)&#123;</span><br><span class="line">        this.key = key ;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setValue(V value)&#123;</span><br><span class="line">        this.value = value ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class GenericsDemo09&#123;</span><br><span class="line">    public static void main(String args[])&#123;</span><br><span class="line">        Notepad&lt;String,Integer&gt; t = null ;        // 定义两个泛型类型的对象</span><br><span class="line">        t = new Notepad&lt;String,Integer&gt;() ;       // 里面的key为String，value为Integer</span><br><span class="line">        t.setKey(&quot;汤姆&quot;) ;        // 设置第一个内容</span><br><span class="line">        t.setValue(20) ;            // 设置第二个内容</span><br><span class="line">        System.out.print(&quot;姓名；&quot; + t.getKey()) ;      // 取得信息</span><br><span class="line">        System.out.print(&quot;，年龄；&quot; + t.getValue()) ;       // 取得信息</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="泛型接口如何定义使用？"><a href="#泛型接口如何定义使用？" class="headerlink" title="泛型接口如何定义使用？"></a>泛型接口如何定义使用？</h2><ul>
<li>简单的泛型接口</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">interface Info&lt;T&gt;&#123;        // 在接口上定义泛型</span><br><span class="line">    public T getVar() ; // 定义抽象方法，抽象方法的返回值就是泛型类型</span><br><span class="line">&#125;</span><br><span class="line">class InfoImpl&lt;T&gt; implements Info&lt;T&gt;&#123;   // 定义泛型接口的子类</span><br><span class="line">    private T var ;             // 定义属性</span><br><span class="line">    public InfoImpl(T var)&#123;     // 通过构造方法设置属性内容</span><br><span class="line">        this.setVar(var) ;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setVar(T var)&#123;</span><br><span class="line">        this.var = var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public T getVar()&#123;</span><br><span class="line">        return this.var ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class GenericsDemo24&#123;</span><br><span class="line">    public static void main(String arsg[])&#123;</span><br><span class="line">        Info&lt;String&gt; i = null;        // 声明接口对象</span><br><span class="line">        i = new InfoImpl&lt;String&gt;(&quot;汤姆&quot;) ;  // 通过子类实例化对象</span><br><span class="line">        System.out.println(&quot;内容：&quot; + i.getVar()) ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="泛型方法如何定义使用？"><a href="#泛型方法如何定义使用？" class="headerlink" title="泛型方法如何定义使用？"></a>泛型方法如何定义使用？</h2><p>泛型方法，是在调用方法的时候指明泛型的具体类型。</p>
<ul>
<li>定义泛型方法语法格式</li>
</ul>
<p><img src="https://tgph.319226.xyz/file/ee8a3fe6c0a2a8589387b.png" alt="image.png"></p>
<ul>
<li>调用泛型方法语法格式</li>
</ul>
<p><img src="https://tgph.319226.xyz/file/42a7f1d5cdc9ba9a90147.png" alt="image.png"></p>
<p>说明一下，定义泛型方法时，必须在返回值前边加一个<code>&lt;T&gt;</code>，来声明这是一个泛型方法，持有一个泛型<code>T</code>，然后才可以用泛型 T 作为方法的返回值。</p>
<p><code>Class&lt;T&gt;</code>的作用就是指明泛型的具体类型，而<code>Class&lt;T&gt;</code>类型的变量 c，可以用来创建泛型类的对象。</p>
<p>为什么要用变量 c 来创建对象呢？既然是泛型方法，就代表着我们不知道具体的类型是什么，也不知道构造方法如何，因此没有办法去 new 一个对象，但可以利用变量 c 的 newInstance 方法去创建对象，也就是利用反射创建对象。</p>
<p>泛型方法要求的参数是<code>Class&lt;T&gt;</code>类型，而<code>Class.forName()</code>方法的返回值也是<code>Class&lt;T&gt;</code>，因此可以用<code>Class.forName()</code>作为参数。其中，<code>forName()</code>方法中的参数是何种类型，返回的<code>Class&lt;T&gt;</code>就是何种类型。在本例中，<code>forName()</code>方法中传入的是 User 类的完整路径，因此返回的是<code>Class&lt;User&gt;</code>类型的对象，因此调用泛型方法时，变量 c 的类型就是<code>Class&lt;User&gt;</code>，因此泛型方法中的泛型 T 就被指明为 User，因此变量 obj 的类型为 User。</p>
<p>当然，泛型方法不是仅仅可以有一个参数<code>Class&lt;T&gt;</code>，可以根据需要添加其他参数。</p>
<p><strong>为什么要使用泛型方法呢</strong>？因为泛型类要在实例化的时候就指明类型，如果想换一种类型，不得不重新 new 一次，可能不够灵活；而泛型方法可以在调用的时候指明类型，更加灵活。</p>
<h2 id="泛型的上限和下限？"><a href="#泛型的上限和下限？" class="headerlink" title="泛型的上限和下限？"></a>泛型的上限和下限？</h2><p>在使用泛型的时候，我们可以为传入的泛型类型实参进行上下边界的限制，如：类型实参只准传入某种类型的父类或某种类型的子类。</p>
<p>上限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Info&lt;T extends Number&gt;&#123;    // 此处泛型只能是数字类型</span><br><span class="line">    private T var ;        // 定义泛型变量</span><br><span class="line">    public void setVar(T var)&#123;</span><br><span class="line">        this.var = var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public T getVar()&#123;</span><br><span class="line">        return this.var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public String toString()&#123;    // 直接打印</span><br><span class="line">        return this.var.toString() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class demo1&#123;</span><br><span class="line">    public static void main(String args[])&#123;</span><br><span class="line">        Info&lt;Integer&gt; i1 = new Info&lt;Integer&gt;() ;        // 声明Integer的泛型对象</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Info&lt;T&gt;&#123;</span><br><span class="line">    private T var ;        // 定义泛型变量</span><br><span class="line">    public void setVar(T var)&#123;</span><br><span class="line">        this.var = var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public T getVar()&#123;</span><br><span class="line">        return this.var ;</span><br><span class="line">    &#125;</span><br><span class="line">    public String toString()&#123;    // 直接打印</span><br><span class="line">        return this.var.toString() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class GenericsDemo21&#123;</span><br><span class="line">    public static void main(String args[])&#123;</span><br><span class="line">        Info&lt;String&gt; i1 = new Info&lt;String&gt;() ;        // 声明String的泛型对象</span><br><span class="line">        Info&lt;Object&gt; i2 = new Info&lt;Object&gt;() ;        // 声明Object的泛型对象</span><br><span class="line">        i1.setVar(&quot;hello&quot;) ;</span><br><span class="line">        i2.setVar(new Object()) ;</span><br><span class="line">        fun(i1) ;</span><br><span class="line">        fun(i2) ;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void fun(Info&lt;? super String&gt; temp)&#123;    // 只能接收String或Object类型的泛型，String类的父类只有Object类</span><br><span class="line">        System.out.print(temp + &quot;, &quot;) ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何理解-Java-中的泛型是伪泛型？"><a href="#如何理解-Java-中的泛型是伪泛型？" class="headerlink" title="如何理解 Java 中的泛型是伪泛型？"></a>如何理解 Java 中的泛型是伪泛型？</h2><p>泛型中类型擦除 Java 泛型这个特性是从 JDK 1.5 才开始加入的，因此为了兼容之前的版本，Java 泛型的实现采取了“伪泛型”的策略，即 Java 在语法上支持泛型，但是在编译阶段会进行所谓的“类型擦除”（Type Erasure），将所有的泛型表示（尖括号中的内容）都替换为具体的类型（其对应的原生态类型），就像完全没有泛型一样。</p>
<h1 id="代码工具"><a href="#代码工具" class="headerlink" title="代码工具"></a>代码工具</h1><h3 id="行列转换-1"><a href="#行列转换-1" class="headerlink" title="行列转换"></a>行列转换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 行列转换 [&#123;str1:v1,str2:v2&#125;] → &#123;v1:v2&#125;,..</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">private</span> fun <span class="title function_">rowToColMap</span><span class="params">(map: List&lt;JavaMap&gt;, str1: String, str2: String)</span>: MutableMap&lt;String, String&gt; &#123;</span><br><span class="line">     <span class="type">val</span> <span class="variable">tempMap</span> <span class="operator">=</span> mutableMapOf&lt;String, String&gt;()</span><br><span class="line">     map.forEach &#123;</span><br><span class="line">         tempMap[it[str1].toString()] = it[str2].toString()</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> tempMap</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 行列转换 [&#123;str1:v1,str2:v2,str3:v3&#125;] → &#123;v1_v2:v3&#125;,..</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">private</span> fun <span class="title function_">rowToColMap</span><span class="params">(map: List&lt;JavaMap&gt;, str1: String, str2: String, str3: String)</span>: MutableMap&lt;String, String&gt; &#123;</span><br><span class="line">     <span class="type">val</span> <span class="variable">tempMap</span> <span class="operator">=</span> mutableMapOf&lt;String, String&gt;()</span><br><span class="line">     map.forEach &#123;</span><br><span class="line">         tempMap[it[str1].toString() + <span class="string">&quot;_&quot;</span>+ it[str2].toString()] = it[str3].toString()</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> tempMap</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="多线程并行请求数据库"><a href="#多线程并行请求数据库" class="headerlink" title="多线程并行请求数据库"></a>多线程并行请求数据库</h3><p>使用 Executors 创建线程池，CountDownLatch 做控制的一个小 demo</p>
<p>注意，如果有错误信息无法打出，且会卡在那里，先不加入线程跑一次确定没有错误</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> cdl = CountDownLatch(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> fixedThreadPool: ExecutorService = Executors.newFixedThreadPool(<span class="number">1</span>);</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">lateinit</span> <span class="keyword">var</span> statementMapper: StatementMapper</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> dbProxy: DbRouter</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">basicDetailsOfDrivingSchool</span><span class="params">(session: <span class="type">SysUserSession</span>, <span class="keyword">data</span>: <span class="type">JavaMap</span>)</span></span>: Any? &#123;</span><br><span class="line">   <span class="keyword">val</span> map = ConcurrentHashMap&lt;String, Any&gt;()</span><br><span class="line">   fixedThreadPool.submit &#123;</span><br><span class="line">      dbProxy.executebKeyResult(session.ayuser.ppas.toString()) &#123;</span><br><span class="line">         println(<span class="string">&quot;子线程&quot;</span>+Thread.currentThread().name +<span class="string">&quot;开始执行&quot;</span>);</span><br><span class="line">         map[<span class="string">&quot;drivingSchool&quot;</span>] = <span class="keyword">this</span>.correspondingDivisionOfDrivingSchool()</span><br><span class="line">         println(<span class="string">&quot;子线程&quot;</span>+Thread.currentThread().name +<span class="string">&quot;执行结束&quot;</span>);</span><br><span class="line">         cdl.countDown()</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   System.<span class="keyword">out</span>.println(<span class="string">&quot;主线程&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;等待子线程执行完成&quot;</span>);</span><br><span class="line">   cdl.await()</span><br><span class="line">   System.<span class="keyword">out</span>.println(<span class="string">&quot;主线程&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;开始执行排序...&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapper 添加 @DS(&quot;xx&quot;) 就可以有sqlSession 事务，不用加这个</span></span><br><span class="line"><span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">correspondingDivisionOfDrivingSchool</span><span class="params">()</span></span> = statementMapper.correspondingDivisionOfDrivingSchool()</span><br></pre></td></tr></table></figure>

<p>报错内容，多数据源引起，指定 @DS 解决</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2737c40d] was not registered for synchronization because synchronization is not active  </span><br><span class="line">JDBC Connection [HikariProxyConnection@1462160887 wrapping org.postgresql.jdbc.PgConnection@366e22fc] will not be managed by Spring  </span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2737c40d]</span><br></pre></td></tr></table></figure>

<h3 id="统计代码耗时"><a href="#统计代码耗时" class="headerlink" title="统计代码耗时"></a>统计代码耗时</h3><h4 id="使用-System-currentTimeMillis"><a href="#使用-System-currentTimeMillis" class="headerlink" title="使用 System.currentTimeMillis()"></a>使用 System.currentTimeMillis()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  <span class="type">Long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">  <span class="comment">// 你的业务代码</span></span><br><span class="line">  <span class="type">Long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">  <span class="type">Long</span> <span class="variable">elapsedTime</span> <span class="operator">=</span> (endTime - startTime) / <span class="number">1000</span>;</span><br><span class="line">  System.out.println(<span class="string">&quot;该段总共耗时：&quot;</span> + elapsedTime + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="使用-StopWatch"><a href="#使用-StopWatch" class="headerlink" title="使用 StopWatch"></a>使用 StopWatch</h4><p>org.springframework.util</p>
<p>需要在你的 Maven 中引入 Spring 核心包，当然 Spring MVC 和 Spring Boot 都已经自动引入了该包：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">StopWatch</span> <span class="variable">stopWatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StopWatch</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 任务一模拟休眠3秒钟</span></span><br><span class="line">    stopWatch.start(<span class="string">&quot;TaskOneName&quot;</span>);</span><br><span class="line">    Thread.sleep(<span class="number">1000</span> * <span class="number">3</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;当前任务名称：&quot;</span> + stopWatch.currentTaskName());</span><br><span class="line">    stopWatch.stop();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 任务一模拟休眠10秒钟</span></span><br><span class="line">    stopWatch.start(<span class="string">&quot;TaskTwoName&quot;</span>);</span><br><span class="line">    Thread.sleep(<span class="number">1000</span> * <span class="number">10</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;当前任务名称：&quot;</span> + stopWatch.currentTaskName());</span><br><span class="line">    stopWatch.stop();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 任务一模拟休眠10秒钟</span></span><br><span class="line">    stopWatch.start(<span class="string">&quot;TaskThreeName&quot;</span>);</span><br><span class="line">    Thread.sleep(<span class="number">1000</span> * <span class="number">10</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;当前任务名称：&quot;</span> + stopWatch.currentTaskName());</span><br><span class="line">    stopWatch.stop();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印出耗时</span></span><br><span class="line">    System.out.println(stopWatch.prettyPrint());</span><br><span class="line">    System.out.println(stopWatch.shortSummary());</span><br><span class="line">    <span class="comment">// stop后它的值为null</span></span><br><span class="line">    System.out.println(stopWatch.currentTaskName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 最后一个任务的相关信息</span></span><br><span class="line">    System.out.println(stopWatch.getLastTaskName());</span><br><span class="line">    System.out.println(stopWatch.getLastTaskInfo());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 任务总的耗时  如果你想获取到每个任务详情（包括它的任务名、耗时等等）可使用</span></span><br><span class="line">    System.out.println(<span class="string">&quot;所有任务总耗时：&quot;</span> + sw.getTotalTimeMillis());</span><br><span class="line">    System.out.println(<span class="string">&quot;任务总数：&quot;</span> + sw.getTaskCount());</span><br><span class="line">    System.out.println(<span class="string">&quot;所有任务详情：&quot;</span> + sw.getTaskInfo());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="使用-StopWath-推荐"><a href="#使用-StopWath-推荐" class="headerlink" title="使用 StopWath 推荐"></a>使用 StopWath 推荐</h4><p>org.apache.commons.lang3</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="comment">//创建后立即start，常用</span></span><br><span class="line">    <span class="type">StopWatch</span> <span class="variable">watch</span> <span class="operator">=</span> StopWatch.createStarted();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// StopWatch watch = new StopWatch();</span></span><br><span class="line">    <span class="comment">// watch.start();</span></span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    System.out.println(watch.getTime());</span><br><span class="line">    System.out.println(<span class="string">&quot;统计从开始到现在运行时间：&quot;</span> + watch.getTime() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    watch.split();</span><br><span class="line">    System.out.println(<span class="string">&quot;从start到此刻为止的时间：&quot;</span> + watch.getTime());</span><br><span class="line">    System.out.println(<span class="string">&quot;从开始到第一个切入点运行时间：&quot;</span> + watch.getSplitTime());</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    watch.split();</span><br><span class="line">    System.out.println(<span class="string">&quot;从开始到第二个切入点运行时间：&quot;</span> + watch.getSplitTime());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 复位后, 重新计时</span></span><br><span class="line">    watch.reset();</span><br><span class="line">    watch.start();</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;重新开始后到当前运行时间是：&quot;</span> + watch.getTime());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 暂停 与 恢复</span></span><br><span class="line">    watch.suspend();</span><br><span class="line">    System.out.println(<span class="string">&quot;暂停2秒钟&quot;</span>);</span><br><span class="line">    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 上面suspend，这里要想重新统计，需要恢复一下</span></span><br><span class="line">    watch.resume();</span><br><span class="line">    System.out.println(<span class="string">&quot;恢复后执行的时间是：&quot;</span> + watch.getTime());</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    watch.stop();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;花费的时间》》&quot;</span> + watch.getTime() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    <span class="comment">// 直接转成s</span></span><br><span class="line">    System.out.println(<span class="string">&quot;花费的时间》》&quot;</span> + watch.getTime(TimeUnit.SECONDS) + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h1><h2 id="面向对象特性"><a href="#面向对象特性" class="headerlink" title="面向对象特性"></a>面向对象特性</h2><h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><p>利用抽象数据类型将数据和基于数据的操作封装在一起，使其构成一个不可分割的独立实体。数据被保护在抽象数据类型的内部，尽可能地隐藏内部的细节，只保留一些对外接口使之与外部发生联系。用户无需知道对象内部的细节，但可以通过对象对外提供的接口来访问该对象。</p>
<p>优点:</p>
<ul>
<li>减少耦合: 可以独立地开发、测试、优化、使用、理解和修改</li>
<li>减轻维护的负担: 可以更容易被程序员理解，并且在调试的时候可以不影响其他模块</li>
<li>有效地调节性能: 可以通过剖析确定哪些模块影响了系统的性能</li>
<li>提高软件的可重用性</li>
<li>降低了构建大型系统的风险: 即使整个系统不可用，但是这些独立的模块却有可能是可用的</li>
</ul>
<p>以下 Person 类封装 name、gender、age 等属性，外界只能通过 get() 方法获取一个 Person 对象的 name 属性和 gender 属性，而无法获取 age 属性，但是 age 属性可以供 work() 方法使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender == <span class="number">0</span> ? <span class="string">&quot;man&quot;</span> : <span class="string">&quot;woman&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">18</span> &lt;= age &amp;&amp; age &lt;= <span class="number">50</span>) &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot; is working very hard!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot; can&#x27;t work any more!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>继承实现了 <strong>IS-A</strong> 关系，例如 Cat 和 Animal 就是一种 IS-A 关系，因此 Cat 可以继承自 Animal，从而获得 Animal 非 private 的属性和方法。</p>
<p>继承应该遵循里氏替换原则，子类对象必须能够替换掉所有父类对象。</p>
<p>Cat 可以当做 Animal 来使用，也就是说可以使用 Animal 引用 Cat 对象。父类引用指向子类对象称为 <strong>向上转型</strong> 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br></pre></td></tr></table></figure>

<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>多态分为编译时多态和运行时多态:</p>
<ul>
<li>编译时多态主要指方法的重载</li>
<li>运行时多态指程序中定义的对象引用所指向的具体类型在运行期间才确定</li>
</ul>
<p>运行时多态有三个条件:</p>
<ul>
<li>继承</li>
<li>覆盖(重写)</li>
<li>向上转型</li>
</ul>
<h4 id="编译看左，执行看右"><a href="#编译看左，执行看右" class="headerlink" title="编译看左，执行看右"></a>编译看左，执行看右</h4><p>Person 父类，Student 子类</p>
<p>多态，向上转型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(); <span class="comment">// 子类方法 + 继承父类方法（子类没有的）</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();<span class="comment">// 只能使用父类方法，但执行子类实现（多态，编译看左，执行看右）</span></span><br></pre></td></tr></table></figure>

<p>父（高）子（低），高转低需要强转，父 → 子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="type">Student</span> <span class="variable">a1</span> <span class="operator">=</span> (Student) a; <span class="comment">// 强转后，可以使用子类独有方法了（此时对象为子类，子类所有方法都可使用）</span></span><br></pre></td></tr></table></figure>

<h2 id="隐式转换"><a href="#隐式转换" class="headerlink" title="+&#x3D; 隐式转换"></a>+&#x3D; 隐式转换</h2><p>+&#x3D; 隐式的将加操作的结果类型强制转换为持有结果的类型。如果两个整型相加，如 byte、short 或者 int，首先会将它们提升到 int 类型，然后在执行加法操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">byte a = 127;</span><br><span class="line">byte b = 127;</span><br><span class="line">b = a + b; // error : cannot convert from int to byte</span><br><span class="line">b += a; // ok</span><br></pre></td></tr></table></figure>

<p>（因为 a+b 操作会将 a、b 提升为 int 类型，所以将 int 类型赋值给 byte 就会编译出错）</p>
<h2 id="3-0-1-0-3"><a href="#3-0-1-0-3" class="headerlink" title="3*0.1 &#x3D;&#x3D; 0.3"></a>3*0.1 &#x3D;&#x3D; 0.3</h2><p>会返回什么? true 还是 false?</p>
<p>false，因为有些浮点数不能完全精确的表示出来。</p>
<h2 id="在-Switch-中使用-String"><a href="#在-Switch-中使用-String" class="headerlink" title="在 Switch 中使用 String"></a>在 Switch 中使用 String</h2><p>从 Java 7 开始，我们可以在 switch case 中使用字符串，但这仅仅是一个语法糖。内部实现在 switch 中使用字符串的 hash code。</p>
<h2 id="对-equals-和-hashCode-的理解"><a href="#对-equals-和-hashCode-的理解" class="headerlink" title="对 equals()和 hashCode()的理解?"></a>对 equals()和 hashCode()的理解?</h2><ul>
<li><strong>为什么在重写 equals 方法的时候需要重写 hashCode 方法</strong>?</li>
</ul>
<p>因为有强制的规范指定需要同时重写 hashcode 与 equals 是方法，许多容器类，如 HashMap、HashSet 都依赖于 hashcode 与 equals 的规定。</p>
<ul>
<li><strong>有没有可能两个不相等的对象有相同的 hashcode</strong>?</li>
</ul>
<p>有可能，两个不相等的对象可能会有相同的 hashcode 值，这就是为什么在 hashmap 中会有冲突。相等 hashcode 值的规定只是说如果两个对象相等，必须有相同的 hashcode 值，但是没有关于不相等对象的任何规定。</p>
<ul>
<li><strong>两个相同的对象会有不同的 hash code 吗</strong>?</li>
</ul>
<p>不能，根据 hash code 的规定，这是不可能的。</p>
<h2 id="final、finalize-和-finally-的不同之处"><a href="#final、finalize-和-finally-的不同之处" class="headerlink" title="final、finalize 和 finally 的不同之处?"></a>final、finalize 和 finally 的不同之处?</h2><ul>
<li>final 是一个修饰符，可以修饰变量、方法和类。如果 final 修饰变量，意味着该变量的值在初始化后不能被改变。</li>
<li>Java 技术允许使用 finalize() 方法在垃圾收集器将对象从内存中清除出去之前做必要的清理工作。这个方法是由垃圾收集器在确定这个对象没有被引用时对这个对象调用的，但是什么时候调用 finalize 没有保证。</li>
<li>finally 是一个关键字，与 try 和 catch 一起用于异常的处理。finally 块一定会被执行，无论在 try 块中是否有发生异常。</li>
</ul>
<h2 id="string、stringbuffer-与-stringbuilder-的区别"><a href="#string、stringbuffer-与-stringbuilder-的区别" class="headerlink" title="string、stringbuffer 与 stringbuilder 的区别"></a>string、stringbuffer 与 stringbuilder 的区别</h2><p>第一点: 可变和适用范围。String 对象是不可变的，而 StringBuffer 和 StringBuilder 是可变字符序列。每次对 String 的操作相当于生成一个新的 String 对象，而对 StringBuffer 和 StringBuilder 的操作是对对象本身的操作，而不会生成新的对象，所以对于频繁改变内容的字符串避免使用 String，因为频繁的生成对象将会对系统性能产生影响。</p>
<p>第二点: 线程安全。String 由于有 final 修饰，是 immutable 的，安全性是简单而纯粹的。StringBuilder 和 StringBuffer 的区别在于 StringBuilder 不保证同步，也就是说如果需要线程安全需要使用 StringBuffer，不需要同步的 StringBuilder 效率更高。</p>
<h2 id="接口与抽象类的区别"><a href="#接口与抽象类的区别" class="headerlink" title="接口与抽象类的区别"></a>接口与抽象类的区别</h2><ul>
<li>一个子类只能继承一个抽象类, 但能实现多个接口</li>
<li>抽象类可以有构造方法, 接口没有构造方法</li>
<li>抽象类可以有普通成员变量, 接口没有普通成员变量</li>
<li>抽象类和接口都可有静态成员变量, 抽象类中静态成员变量访问类型任意，接口只能 public static final(默认)</li>
<li>抽象类可以没有抽象方法, 抽象类可以有普通方法；接口在 JDK8 之前都是抽象方法，在 JDK8 可以有 default 方法，在 JDK9 中允许有私有普通方法</li>
<li>抽象类可以有静态方法；接口在 JDK8 之前不能有静态方法，在 JDK8 中可以有静态方法，且只能被接口类直接调用（不能被实现类的对象调用）</li>
<li>抽象类中的方法可以是 public、protected; 接口方法在 JDK8 之前只有 public abstract，在 JDK8 可以有 default 方法，在 JDK9 中允许有 private 方法</li>
</ul>
<h2 id="this-super-在构造方法中的区别？"><a href="#this-super-在构造方法中的区别？" class="headerlink" title="this() &amp; super() 在构造方法中的区别？"></a>this() &amp; super() 在构造方法中的区别？</h2><ul>
<li>调用 super() 必须写在子类构造方法的第一行, 否则编译不通过</li>
<li>super 从子类调用父类构造, this 在同一类中调用其他构造均需要放在第一行</li>
<li>尽管可以用 this 调用一个构造器, 却不能调用 2 个</li>
<li>this 和 super 不能出现在同一个构造器中, 否则编译不通过</li>
<li>this()、super() 都指的对象,不可以在 static 环境中使用</li>
<li>本质 this 指向本对象的指针。super 是一个关键字</li>
</ul>
<h2 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h2><p>在线程中调用另一个线程的 join() 方法，会将当前线程挂起，而不是忙等待，直到目标线程结束。</p>
<p>对于以下代码，虽然 b 线程先启动，但是因为在 b 线程中调用了 a 线程的 join() 方法，b 线程会等待 a 线程结束才继续执行，因此最后能够保证 a 线程的输出先于 b 线程的输出。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JoinExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> A a;</span><br><span class="line"></span><br><span class="line">        B(A a) &#123;</span><br><span class="line">            <span class="built_in">this</span>.a = a;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                a.join();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>(a);</span><br><span class="line">        b.start();</span><br><span class="line">        a.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    JoinExample example = new JoinExample();</span><br><span class="line">    example.test();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A</span><br><span class="line">B</span><br></pre></td></tr></table></figure>

<h2 id="wait-notify-notifyAll"><a href="#wait-notify-notifyAll" class="headerlink" title="wait() notify() notifyAll()"></a>wait() notify() notifyAll()</h2><p>调用 wait() 使得线程等待某个条件满足，线程在等待时会被挂起，当其他线程的运行使得这个条件满足时，其它线程会调用 notify() 或者 notifyAll() 来唤醒挂起的线程。</p>
<p>它们都属于 Object 的一部分，而不属于 Thread。</p>
<p>只能用在同步方法或者同步控制块中使用，否则会在运行时抛出 IllegalMonitorStateExeception。</p>
<p>使用 wait() 挂起期间，线程会释放锁。这是因为，如果没有释放锁，那么其它线程就无法进入对象的同步方法或者同步控制块中，那么就无法执行 notify() 或者 notifyAll() 来唤醒挂起的线程，造成死锁。</p>
<p>运行以下代码：分别创建了 t1 和 t2 两个线程，它们对同一个对象加锁，并且让 t1 线程中执行 wait()，t2 线程中执行 notify()。先后启动 t1 和 t2 线程，观察结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;wait开始&quot;</span>);</span><br><span class="line">                    <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                        locker.wait();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">&quot;wait结束&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>); <span class="comment">//保证t1先启动，wait()先执行</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;notify开始&quot;</span>);</span><br><span class="line">                locker.notify();</span><br><span class="line">                System.out.println(<span class="string">&quot;notify结束&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wait 开始</span><br><span class="line">notify 开始</span><br><span class="line">notify 结束</span><br><span class="line">wait 结束</span><br></pre></td></tr></table></figure>

<ul>
<li>在上述代码中，t1 先执行。当 t1 执行到 wait()时候，t1 的锁被 wait()释放，且 t1 自身进入阻塞等待状态。</li>
<li>1s 后，t2 获取到锁并开始执行。当 t2 执行到 notify()时，就会通知 t1 线程唤醒。</li>
<li>注意，由于 notify()是在 synchronized 的内部，因此只有等到 t2 释放了锁，t1 才能再竞争到锁，并继续向下执行。因此，控制台上先输出“notify 结束”，再输出“wait 结束”。</li>
</ul>
<h2 id="wait-和-sleep-的区别"><a href="#wait-和-sleep-的区别" class="headerlink" title="wait() 和 sleep() 的区别"></a>wait() 和 sleep() 的区别</h2><ul>
<li>wait() 是 Object 的方法，而 sleep() 是 Thread 的静态方法；</li>
<li>wait() 会释放锁，sleep() 不会。</li>
</ul>
<h2 id="await-signal-signalAll"><a href="#await-signal-signalAll" class="headerlink" title="await() signal() signalAll()"></a>await() signal() signalAll()</h2><p>java.util.concurrent 类库中提供了 Condition 类来实现线程之间的协调，可以在 Condition 上调用 await() 方法使线程等待，其它线程调用 signal() 或 signalAll() 方法唤醒等待的线程。相比于 wait() 这种等待方式，await() 可以指定等待的条件，因此更加灵活。</p>
<h1 id="创建线程"><a href="#创建线程" class="headerlink" title="创建线程"></a>创建线程</h1><h3 id="继承Thread，重写run方法"><a href="#继承Thread，重写run方法" class="headerlink" title="继承Thread，重写run方法"></a>继承Thread，重写run方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;继承Thread，重写run方法创建线程&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现Runnable接口，重写run方法"><a href="#实现Runnable接口，重写run方法" class="headerlink" title="实现Runnable接口，重写run方法"></a>实现Runnable接口，重写run方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现Runnable接口，重写run方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;使用匿名内部类创建 Thread 子类对象&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;使用匿名内部类，实例Runnable接口作为构造参数&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;使用lambda表示创建线程&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现Callable接口"><a href="#实现Callable接口" class="headerlink" title="实现Callable接口"></a>实现Callable接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallableTest</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Integer&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;创建线程:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        FutureTask&lt;Integer&gt; task = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">MyCallableTest</span>());</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;创建线程的返回结果为:&quot;</span> + task.get());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用线程池创建线程"><a href="#使用线程池创建线程" class="headerlink" title="使用线程池创建线程"></a>使用线程池创建线程</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://cjchn.github.io">CJ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://cjchn.github.io/posts/20231023084542-df2849ec.html">https://cjchn.github.io/posts/20231023084542-df2849ec.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://cjchn.github.io" target="_blank">CJ's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/20231023084632-f5f9fa9b.html" title="Docker"><img class="cover" src="https://vip.helloimg.com/images/2023/12/15/o7LB0t.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Docker</div></div></a></div><div class="next-post pull-right"><a href="/posts/20231023084508-69c3279c.html" title="Git"><img class="cover" src="https://vip.helloimg.com/images/2023/12/15/o7LogY.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://imgcdn.319226.xyz/202401041503387.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CJ</div><div class="author-info__description">保持正念，相信自己会越来越好</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2675851908&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/cjchn" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/302998641" target="_blank" title="视频"><i class="fab fa-youtube" style="color: #24292e;"></i></a><a class="social-icon" href="https://tgph.319226.xyz/" target="_blank" title="图床"><i class="fa-solid fa-image" style="color: #24292e;"></i></a><a class="social-icon" href="https://onedrive.319226.xyz/" target="_blank" title="云盘"><i class="fa-solid fa-cloud" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">Java 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-%E6%B5%81"><span class="toc-number">1.1.</span> <span class="toc-text">Stream 流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.1.1.</span> <span class="toc-text">视频学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">Lambda 表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#distinct"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">distinct</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sorted"><span class="toc-number">1.1.2.4.</span> <span class="toc-text">sorted</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit"><span class="toc-number">1.1.2.5.</span> <span class="toc-text">limit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#skip"><span class="toc-number">1.1.2.6.</span> <span class="toc-text">skip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#flatMap"><span class="toc-number">1.1.2.7.</span> <span class="toc-text">flatMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#forEach"><span class="toc-number">1.1.2.8.</span> <span class="toc-text">forEach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#count"><span class="toc-number">1.1.2.9.</span> <span class="toc-text">count</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#max-min"><span class="toc-number">1.1.2.10.</span> <span class="toc-text">max&amp;min</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#collect"><span class="toc-number">1.1.2.11.</span> <span class="toc-text">collect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#anyMatch"><span class="toc-number">1.1.2.12.</span> <span class="toc-text">anyMatch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#allMatch"><span class="toc-number">1.1.2.13.</span> <span class="toc-text">allMatch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#noneMatch"><span class="toc-number">1.1.2.14.</span> <span class="toc-text">noneMatch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#findAny"><span class="toc-number">1.1.2.15.</span> <span class="toc-text">findAny</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#findFirst"><span class="toc-number">1.1.2.16.</span> <span class="toc-text">findFirst</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reduce-%E5%BD%92%E5%B9%B6"><span class="toc-number">1.1.2.17.</span> <span class="toc-text">reduce 归并</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optional"><span class="toc-number">1.1.3.</span> <span class="toc-text">Optional</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.4.</span> <span class="toc-text">函数式接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">方法引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-number">1.1.6.</span> <span class="toc-text">高级用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BC%98%E5%8C%96"><span class="toc-number">1.1.6.1.</span> <span class="toc-text">基本数据类型优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E6%B5%81"><span class="toc-number">1.1.6.2.</span> <span class="toc-text">并行流</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.2.</span> <span class="toc-text">注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PathVariable"><span class="toc-number">1.2.1.</span> <span class="toc-text">@PathVariable</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Feign"><span class="toc-number">1.3.</span> <span class="toc-text">Feign</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RestTemplate"><span class="toc-number">1.4.</span> <span class="toc-text">RestTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#set-%E6%B3%A8%E5%85%A5"><span class="toc-number">1.4.1.</span> <span class="toc-text">set 注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.3.</span> <span class="toc-text">无参构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.4.</span> <span class="toc-text">代码配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.5.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.6.</span> <span class="toc-text">动态代理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comparator-%E5%92%8C-comparable"><span class="toc-number">1.5.</span> <span class="toc-text">comparator 和 comparable</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#comparator-%E6%AF%94%E8%BE%83%E5%99%A8"><span class="toc-number">1.5.1.</span> <span class="toc-text">comparator 比较器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#comparable"><span class="toc-number">1.5.2.</span> <span class="toc-text">comparable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bug-%E6%B8%85%E5%8D%95"><span class="toc-number">1.5.3.</span> <span class="toc-text">Bug 清单</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">1.6.</span> <span class="toc-text">排序算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">1.7.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LocalDate"><span class="toc-number">1.7.1.</span> <span class="toc-text">LocalDate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaWeb-%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD-%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.2.</span> <span class="toc-text">JavaWeb 实现文件下载 (案例)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pdf-%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">1.7.3.</span> <span class="toc-text">pdf 工具类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.7.4.</span> <span class="toc-text">逆向工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">1.7.5.</span> <span class="toc-text">下载配置信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E5%88%97%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.7.6.</span> <span class="toc-text">行列转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base64-%E7%A0%81%E5%89%8D%E7%BC%80"><span class="toc-number">1.7.7.</span> <span class="toc-text">base64 码前缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.8.</span> <span class="toc-text">物理分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.9.</span> <span class="toc-text">逻辑分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list-%E9%9B%86%E5%90%88%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-number">1.7.10.</span> <span class="toc-text">list 集合转换字符串拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E8%BF%94%E5%9B%9E%E6%B5%81"><span class="toc-number">1.7.11.</span> <span class="toc-text">后台下载文件返回流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.12.</span> <span class="toc-text">小工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%A4%84%E7%90%86"><span class="toc-number">1.7.12.1.</span> <span class="toc-text">权限处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A1%8C%E8%BD%AC%E5%88%97"><span class="toc-number">1.7.12.2.</span> <span class="toc-text">代码行转列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">1.7.12.3.</span> <span class="toc-text">参数处理工具类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-%E7%BC%96%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.13.</span> <span class="toc-text">URL 编解码工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Date-%E5%9E%8B%E6%97%A5%E6%9C%9F%E5%A4%84%E7%90%86"><span class="toc-number">1.7.14.</span> <span class="toc-text">Date 型日期处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Date-%E5%9E%8B%E6%97%A5%E6%9C%9F%E6%AF%94%E8%BE%83%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.7.14.1.</span> <span class="toc-text">Date 型日期比较大小</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scheduled-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">1.8.</span> <span class="toc-text">@Scheduled 定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cron-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.8.1.</span> <span class="toc-text">Cron 表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cron-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">Cron 表达式生成器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">常用的表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fixedRate"><span class="toc-number">1.8.2.</span> <span class="toc-text">fixedRate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fixedDelay"><span class="toc-number">1.8.3.</span> <span class="toc-text">fixedDelay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initialDelay"><span class="toc-number">1.8.4.</span> <span class="toc-text">initialDelay</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comparator-%E5%92%8C-comparable-1"><span class="toc-number">1.9.</span> <span class="toc-text">comparator 和 comparable</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#comparator-%E6%AF%94%E8%BE%83%E5%99%A8-1"><span class="toc-number">1.9.1.</span> <span class="toc-text">comparator 比较器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#comparable-1"><span class="toc-number">1.9.2.</span> <span class="toc-text">comparable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bug-%E6%B8%85%E5%8D%95-1"><span class="toc-number">1.9.3.</span> <span class="toc-text">Bug 清单</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95-1"><span class="toc-number">1.10.</span> <span class="toc-text">排序算法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#23-%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">23 种设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A5%BF%E6%B1%89%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.1.</span> <span class="toc-text">饿汉单例设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">2.1.1.0.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">2.1.1.0.2.</span> <span class="toc-text">缺点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%87%92%E6%B1%89%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.2.</span> <span class="toc-text">懒汉单例设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-1"><span class="toc-number">2.1.2.0.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-1"><span class="toc-number">2.1.2.0.2.</span> <span class="toc-text">缺点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93"><span class="toc-number">2.1.3.</span> <span class="toc-text">知识小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.2.1.</span> <span class="toc-text">接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">2.2.2.</span> <span class="toc-text">实现类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.2.3.</span> <span class="toc-text">对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#main"><span class="toc-number">2.2.4.</span> <span class="toc-text">main</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E7%AE%80%E5%8C%96%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%EF%BC%89"><span class="toc-number">2.3.1.</span> <span class="toc-text">快速入门（简化对象创建）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Car-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.3.1.0.1.</span> <span class="toc-text">Car 接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E4%B8%AA%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.3.1.0.2.</span> <span class="toc-text">二个实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Car-%E5%B7%A5%E5%8E%82"><span class="toc-number">2.3.1.0.3.</span> <span class="toc-text">Car 工厂</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">2.3.1.0.4.</span> <span class="toc-text">测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bean-%E5%B7%A5%E5%8E%82"><span class="toc-number">2.3.2.</span> <span class="toc-text">bean 工厂</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8E-xml-%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8%EF%BC%88%E8%A7%A3%E8%80%A6%EF%BC%89"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">与 xml 配合使用（解耦）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-jar-%E5%8C%85"><span class="toc-number">2.3.2.1.1.</span> <span class="toc-text">导入 jar 包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#xml-%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.2.1.2.</span> <span class="toc-text">xml 配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bean-%E5%B7%A5%E5%8E%82"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">Bean 工厂</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="toc-number">2.3.2.3.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93-1"><span class="toc-number">2.3.3.</span> <span class="toc-text">知识小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.4.1.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.4.2.</span> <span class="toc-text">正则表达式介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.4.3.</span> <span class="toc-text">快速入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%99%AE%E9%80%9A%E5%AD%97%E7%AC%A6"><span class="toc-number">2.4.4.</span> <span class="toc-text">正则表达式-普通字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">2.4.5.</span> <span class="toc-text">正则表达式-逻辑运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E9%A2%84%E5%AE%9A%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="toc-number">2.4.6.</span> <span class="toc-text">正则表达式-预定义字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%95%B0%E9%87%8F%E8%AF%8D"><span class="toc-number">2.4.7.</span> <span class="toc-text">正则表达式-数量词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%88%86%E7%BB%84%E6%8B%AC%E5%8F%B7"><span class="toc-number">2.4.8.</span> <span class="toc-text">正则表达式-分组括号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E5%9C%B0%E6%96%B9%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">2.5.</span> <span class="toc-text">不同地方的用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#split-%E6%96%B9%E6%B3%95%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.5.1.</span> <span class="toc-text">split 方法中使用正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replaceAll-%E6%96%B9%E6%B3%95%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.5.2.</span> <span class="toc-text">replaceAll 方法中使用正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS-%E4%B8%AD%E8%BF%90%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.5.3.</span> <span class="toc-text">JS 中运用正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JAVA-%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.5.4.</span> <span class="toc-text">JAVA 中使用正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E5%AD%97%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%9B%86"><span class="toc-number">2.5.5.</span> <span class="toc-text">验证数字的正则表达式集</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%B3%9B%E5%9E%8B%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">为什么需要泛型？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E4%BD%BF%E7%94%A8%EF%BC%9F"><span class="toc-number">3.2.</span> <span class="toc-text">泛型类如何定义使用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E4%BD%BF%E7%94%A8%EF%BC%9F"><span class="toc-number">3.3.</span> <span class="toc-text">泛型接口如何定义使用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E4%BD%BF%E7%94%A8%EF%BC%9F"><span class="toc-number">3.4.</span> <span class="toc-text">泛型方法如何定义使用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%9A%84%E4%B8%8A%E9%99%90%E5%92%8C%E4%B8%8B%E9%99%90%EF%BC%9F"><span class="toc-number">3.5.</span> <span class="toc-text">泛型的上限和下限？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-Java-%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E6%98%AF%E4%BC%AA%E6%B3%9B%E5%9E%8B%EF%BC%9F"><span class="toc-number">3.6.</span> <span class="toc-text">如何理解 Java 中的泛型是伪泛型？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%B7%A5%E5%85%B7"><span class="toc-number">4.</span> <span class="toc-text">代码工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E5%88%97%E8%BD%AC%E6%8D%A2-1"><span class="toc-number">4.0.1.</span> <span class="toc-text">行列转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E8%A1%8C%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.0.2.</span> <span class="toc-text">多线程并行请求数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E8%80%97%E6%97%B6"><span class="toc-number">4.0.3.</span> <span class="toc-text">统计代码耗时</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-System-currentTimeMillis"><span class="toc-number">4.0.3.1.</span> <span class="toc-text">使用 System.currentTimeMillis()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-StopWatch"><span class="toc-number">4.0.3.2.</span> <span class="toc-text">使用 StopWatch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-StopWath-%E6%8E%A8%E8%8D%90"><span class="toc-number">4.0.3.3.</span> <span class="toc-text">使用 StopWath 推荐</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%B9%E6%80%A7"><span class="toc-number">5.1.</span> <span class="toc-text">面向对象特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">5.1.1.</span> <span class="toc-text">封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">5.1.2.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">5.1.3.</span> <span class="toc-text">多态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%9C%8B%E5%B7%A6%EF%BC%8C%E6%89%A7%E8%A1%8C%E7%9C%8B%E5%8F%B3"><span class="toc-number">5.1.3.1.</span> <span class="toc-text">编译看左，执行看右</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">5.2.</span> <span class="toc-text">+&#x3D; 隐式转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-0-1-0-3"><span class="toc-number">5.3.</span> <span class="toc-text">3*0.1 &#x3D;&#x3D; 0.3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-Switch-%E4%B8%AD%E4%BD%BF%E7%94%A8-String"><span class="toc-number">5.4.</span> <span class="toc-text">在 Switch 中使用 String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9-equals-%E5%92%8C-hashCode-%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">5.5.</span> <span class="toc-text">对 equals()和 hashCode()的理解?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#final%E3%80%81finalize-%E5%92%8C-finally-%E7%9A%84%E4%B8%8D%E5%90%8C%E4%B9%8B%E5%A4%84"><span class="toc-number">5.6.</span> <span class="toc-text">final、finalize 和 finally 的不同之处?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#string%E3%80%81stringbuffer-%E4%B8%8E-stringbuilder-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.7.</span> <span class="toc-text">string、stringbuffer 与 stringbuilder 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E4%B8%8E%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.8.</span> <span class="toc-text">接口与抽象类的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this-super-%E5%9C%A8%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">5.9.</span> <span class="toc-text">this() &amp; super() 在构造方法中的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#join"><span class="toc-number">5.10.</span> <span class="toc-text">join()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wait-notify-notifyAll"><span class="toc-number">5.11.</span> <span class="toc-text">wait() notify() notifyAll()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wait-%E5%92%8C-sleep-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.12.</span> <span class="toc-text">wait() 和 sleep() 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#await-signal-signalAll"><span class="toc-number">5.13.</span> <span class="toc-text">await() signal() signalAll()</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">创建线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BFThread%EF%BC%8C%E9%87%8D%E5%86%99run%E6%96%B9%E6%B3%95"><span class="toc-number">6.0.1.</span> <span class="toc-text">继承Thread，重写run方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0Runnable%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%87%8D%E5%86%99run%E6%96%B9%E6%B3%95"><span class="toc-number">6.0.2.</span> <span class="toc-text">实现Runnable接口，重写run方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0Callable%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.0.3.</span> <span class="toc-text">实现Callable接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B"><span class="toc-number">6.0.4.</span> <span class="toc-text">使用线程池创建线程</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/20231229062330-416f6fc3.html" title="NewPost">NewPost</a><time datetime="2023-12-29T06:23:30.000Z" title="发表于 2023-12-29 14:23:30">2023-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/20231222053433-b84b57db.html" title="Html">Html</a><time datetime="2023-12-22T05:34:33.000Z" title="发表于 2023-12-22 13:34:33">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/20231215080353-36687561.html" title="关于音乐">关于音乐</a><time datetime="2023-12-15T08:03:53.000Z" title="发表于 2023-12-15 16:03:53">2023-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20231211023548-74516b02.html" title="office"><img src="https://vip.helloimg.com/images/2023/12/15/o7AvhR.md.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="office"/></a><div class="content"><a class="title" href="/posts/20231211023548-74516b02.html" title="office">office</a><time datetime="2023-12-11T02:35:48.000Z" title="发表于 2023-12-11 10:35:48">2023-12-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/20231207051738-3fb16ec5.html" title="人大金仓">人大金仓</a><time datetime="2023-12-07T05:17:38.000Z" title="发表于 2023-12-07 13:17:38">2023-12-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By CJ</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><span class="scroll-percent"></span><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.2.0/instantpage.min.js" type="module"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.2/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><div class="aplayer no-destroy" data-id="2024518101" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-mini="true"> </div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//npm.elemecdn.com/penndu@1.0.0/bsz.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.17.1/algoliasearch-lite.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.56.1/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div></body></html>